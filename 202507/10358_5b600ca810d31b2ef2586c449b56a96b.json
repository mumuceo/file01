[
  {
    "bookSourceComment": "æ”¯æŒç•ªèŒ„å°è¯´ï¼ŒQQå…è´¹å°è¯´ï¼Œç†ŠçŒ«å°è¯´ï¼Œå¾—é—´å°è¯´ï¼Œä¸ƒçŒ«å°è¯´ï¼Œèµ·ç‚¹69å°è¯´\n\næ›´æ–°è¯´æ˜ï¼š\nç™»å½•é¡µæ–°å¢æ‰‹åŠ¨åˆ‡æ¢ä¹¦ç±æ¥æºé€‰é¡¹æŒ‰é’®\n20241126ä¿®å¤bug\n20241129æ›´æ–°ç§˜é’¥å¡«å†™æ–¹å¼\n20241217æ›´æ–°æœåŠ¡å™¨åˆ‡æ¢åŠŸèƒ½\n20250104æ–°å¢æœåŠ¡å™¨\n20250105ç™»å½•æ–°å¢æ‰‹åŠ¨å¡«å†™æœåŠ¡å™¨",
    "bookSourceGroup": "ç•ªèŒ„å°è¯´,ä¹¦å±±",
    "bookSourceName": "ğŸ“šä¹¦å±±å°è¯´",
    "bookSourceType": 0,
    "bookSourceUrl": "https://api.shusan.cc\næç¤ºï¼šç‚¹å‡»ç™»å½•åˆ‡æ¢æœåŠ¡å™¨æŒ‰é’®å¯è¿›è¡Œåˆ‡æ¢(å½“å‰ä¹¦æºä¸ºçº¯å°è¯´é˜…è¯»)",
    "bookUrlPattern": "",
    "customOrder": -5,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "<js>\nfunction setArgument(key, value) {\n    let open_argument = source.getVariable();\n    open_argument = getArguments(open_argument,'');\n    open_argument[key] = value;\n    open_argument = JSON.stringify(open_argument);\n    source.setVariable(open_argument);\n    return open_argument;\n}\n\nfunction gets_key() {\n    var servers = String(source.bookSourceUrl);\n    const serverList = servers.split('\\n');\n    \n    for (let server of serverList) {\n        let key = String(cookie.getCookie(server)) || String(java.getCookie(server));\n        if (key) {\n            let keyParts = key.split('secretKey=');\n            if (keyParts.length > 1) {\n                key = keyParts[keyParts.length - 1];\n                setArgument('key', key);\n                return key;\n            }\n        }\n    }\n    return '';  \n }\n\nlet open_argument = source.getVariable();\nlet base_url = getArguments(open_argument,'server');\nlet media = getArguments(open_argument,'media');\nlet keys = getArguments(open_argument,'key');\nif (!keys) {\n\tkeys = gets_key();\n\t}\n\nlet data = {\n    \"ç”·\": {\n        \"ç„å¹»\": 7,\n        \"éƒ½å¸‚\": 1,\n        \"æ´ªè’\": 66,\n        \"æ— æ•Œ\": 384,\n        \"æœ«ä¸–\": 68,\n        \"è¯¸å¤©ä¸‡ç•Œ\": 71,\n        \"ç§‘å¹»\": 8,\n        \"æ˜Ÿé™…\": 77,\n        \"é‡ç”Ÿ\": 36,\n        \"ç³»ç»Ÿ\": 19,\n        \"ç¥è±ª\": 20,\n        \"é‰´å®\": 17,\n        \"ä¸‰å›½\": 67,\n        \"äºŒæ¬¡å…ƒ\": 39,\n        \"å†å²\": 12,\n        \"ç¾é£Ÿ\": 78,\n        \"å¥¶çˆ¸\": 42,\n        \"å¨±ä¹åœˆ\": 43,\n        \"å¤§å”\": 73,\n        \"å¤–å–\": 75,\n        \"å® ç‰©\": 74,\n        \"å­¦éœ¸\": 82,\n        \"æ¸¸æˆåŠ¨æ¼«\": 57,\n        \"ä½“è‚²\": 15,\n        \"ç›´æ’­\": 69,\n        \"å¹´ä»£\": 79,\n        \"æ–‡åŒ–å†å²\": 62,\n        \"æµ·å²›\": 40,\n        \"ç¥åŒ»\": 26,\n        \"æ˜æœ\": 126,\n        \"æ­¦ä¾ \": 16,\n        \"çµå¼‚\": 100,\n        \"ç©¿è¶Š\": 37,\n        \"å‰‘é“\": 80,\n        \"éƒ½å¸‚ä¿®çœŸ\": 124,\n        \"èµ˜å©¿\": 25,\n        \"ç›—å¢“\": 81,\n        \"æ¨ç†\": 61,\n        \"æ— é™æµ\": 70,\n        \"ç§ç”°\": 23,\n        \"æˆ˜äº‰\": 97,\n        \"å¤©æ‰\": 90,\n        \"èŒåœº\": 127,\n        \"æ‚¬ç–‘\": 10,\n        \"æˆåŠŸåŠ±å¿—\": 56,\n        \"ç©ºé—´\": 44,\n        \"è…¹é»‘\": 92,\n        \"è¯—æ­Œæ•£æ–‡\": 46,\n        \"å®¶åº­\": 125,\n        \"å½±è§†å°è¯´\": 45,\n        \"ç”Ÿæ´»\": 48,\n        \"éƒ½å¸‚ç”Ÿæ´»\": 2,\n        \"æ‰®çŒªåƒè™\": 93,\n        \"å¤§ç§¦\": 377,\n        \"æ¼«å¨\": 374,\n        \"ç«å½±\": 368,\n        \"è¥¿æ¸¸\": 373,\n        \"é¾™ç \": 376,\n        \"èŠå¤©ç¾¤\": 381,\n        \"æµ·è´¼\": 370,\n        \"å¥¥ç‰¹åŒäºº\": 367,\n        \"ç‰¹ç§å…µ\": 375,\n        \"åæ´¾\": 369,\n        \"æ ¡èŠ±\": 385,\n        \"å¥³å¸\": 378,\n        \"å•å¥³ä¸»\": 389,\n        \"ç¥å¥‡å®è´\": 371,\n        \"ä¹å”\": 383,\n        \"æ±‚ç”Ÿ\": 379,\n        \"æ— å¥³ä¸»\": 391,\n        \"æ­¦é­‚\": 386,\n        \"ç½‘æ¸¸\": 372,\n        \"æˆ˜ç¥\": 27,\n        \"éƒ½å¸‚è„‘æ´\": 262,\n        \"éƒ½å¸‚ç§ç”°\": 263,\n        \"éƒ½å¸‚æ—¥å¸¸\": 261,\n        \"å†å²è„‘æ´\": 272,\n        \"ç„å¹»è„‘æ´\": 257,\n        \"å¥‡å¹»ä»™ä¾ \": 259,\n        \"éƒ½å¸‚é’æ˜¥\": 396,\n        \"ä¼ ç»Ÿç„å¹»\": 258,\n        \"å†å²å¤ä»£\": 273\n    },\n    \"å¥³\": {\n        \"å¹»æƒ³è¨€æƒ…\": 32,\n        \"ç°ä»£è¨€æƒ…\": 3,\n        \"ç°è¨€ç”œå® \": 395,\n        \"ç°è¨€è„‘æ´\": 267,\n        \"å…ˆå©šåçˆ±\": 265,\n        \"éƒ½å¸‚æ—¥å¸¸\": 261,\n        \"å¤è¨€è„‘æ´\": 253,\n        \"å¤è¨€èŒå®\": 249,\n        \"å¤è¨€ç”œå® \": 394,\n        \"ç°è¨€æ—¥å¸¸\": 269,\n        \"ç°è¨€å¤ä»‡\": 268,\n        \"ç„å¹»è¨€æƒ…\": 248,\n        \"åŒ»æœ¯\": 247,\n        \"æ— æ•Œ\": 384,\n        \"ç§ç”°\": 23,\n        \"èŒå®\": 28,\n        \"ç¾é£Ÿ\": 78,\n        \"æ¸¸æˆåŠ¨æ¼«\": 57,\n        \"å¨±ä¹åœˆ\": 43,\n        \"ç›´æ’­\": 69,\n        \"å¥³æ‰®ç”·è£…\": 388,\n        \"äºŒæ¬¡å…ƒ\": 39,\n        \"å›¢å® \": 94,\n        \"æ— cp\": 392,\n        \"é’æ¢…ç«¹é©¬\": 387,\n        \"ç—…å¨‡\": 380,\n        \"ç§‘å¹»\": 8,\n        \"æ­¦ä¾ \": 16,\n        \"å¹´ä»£\": 79,\n        \"é‡ç”Ÿ\": 36,\n        \"çµå¼‚\": 100,\n        \"å…¬ä¸»\": 83,\n        \"ç”œå® \": 96,\n        \"ç›—å¢“\": 81,\n        \"ç³»ç»Ÿ\": 19,\n        \"å¥³å¼º\": 86,\n        \"çš‡å\": 84,\n        \"æ¨ç†\": 61,\n        \"æ–‡åŒ–å†å²\": 62,\n        \"ç”Ÿæ´»\": 48,\n        \"åæ´¾\": 369,\n        \"æœ«ä¸–\": 68,\n        \"æ‚¬ç–‘\": 10,\n        \"ç©¿è¶Š\": 37,\n        \"å­¦éœ¸\": 82,\n        \"æ‰®çŒªåƒè™\": 93,\n        \"æ¸…ç©¿\": 76,\n        \"ç©¿ä¹¦\": 382,\n        \"å¿«ç©¿\": 24,\n        \"çš‡å”\": 87,\n        \"ç©ºé—´\": 44,\n        \"å® å¦»\": 30,\n        \"è±ªé—¨æ€»è£\": 29,\n        \"å½±è§†å°è¯´\": 45,\n        \"æˆåŠŸåŠ±å¿—\": 56,\n        \"èŒåœº\": 127,\n        \"æ°‘å›½\": 390,\n        \"éƒ½å¸‚ç”Ÿæ´»\": 2,\n        \"è…¹é»‘\": 92,\n        \"æ˜Ÿé™…\": 77,\n        \"å¤©æ‰\": 90,\n        \"å¤ä»£è¨€æƒ…\": 5,\n        \"å®¶åº­\": 125,\n        \"å…½ä¸–\": 72,\n        \"æ ¡å›­\": 4,\n        \"è¯—æ­Œæ•£æ–‡\": 46,\n        \"è™æ–‡\": 95,\n        \"å«¡å¥³\": 88,\n        \"ç‹å¦ƒ\": 85,\n        \"ç²¾çµ\": 89,\n        \"é©¬ç”²\": 266\n    }\n};\n\nconst groupDatas = [];\nlet infoData = [];\nfunction deviceType() {\n  try {\n    return!!java.androidId();\n  } catch (e) {\n    return false;\n  }\n}\nlet device = deviceType()? 'android' : 'ios';\nif (device == 'android' && (get_key(String(cookie.getCookie('fanqienovel.com') || java.getCookie('fanqienovel.com'))))) {\n    function groupQuery() {\n        const url = base_url + \"/group_name?cookie={{get_key(String(cookie.getCookie('fanqienovel.com') || java.getCookie('fanqienovel.com')))}}\";\n        const res = java.ajax(url);\n        const data = JSON.parse(res).data;\n\n        data.forEach(group => {\n            let key;\n            for (key in group) {\n                groupDatas.push({\n                    \"title\": key,\n                    \"url\": base_url +\"/bookshelf2?page={{page}}&book_ids=\" + group[key].join(\",\"),\n                    \"style\": {\n                        \"layout_flexGrow\": 1,\n                        \"layout_flexBasisPercent\": 0.45\n                    }\n                });\n            }\n        });\n\n        if (groupDatas.length % 2 !== 0) {\n            groupDatas.push({\n                \"title\": \"--\",\n                \"url\": \"\",\n                \"style\": {\n                    \"layout_flexGrow\": 1,\n                    \"layout_flexBasisPercent\": 0.45\n                }\n            });\n        }\n    }\n\n    try {\n    \tjava.longToast(\"è¯·ç¨ç­‰,æ­£åœ¨æ›´æ–°åˆ†ç»„æ•°æ®!\");\n    // ç”¨æˆ·ä¿¡æ¯\n    const userUrl = base_url + '/fquser?sessionid={{String(cookie.getKey(\"fanqienovel.com\", \"sessionid\"))}}';\n    const userRes = java.ajax(userUrl);\n    const userInfo = JSON.parse(userRes).data.name;\n\n    infoData = [\n        {\n            \"title\": `${userInfo}ä¸ªäººä¸­å¿ƒ`,\n            \"url\": \"\",\n            \"style\": {\n                \"layout_flexGrow\": 1,\n                \"layout_flexBasisPercent\": 1\n            }\n        }\n    ];\n    groupQuery();\n    } catch (e) {\n    java.longToast(\"ç½‘ç»œé”™è¯¯æˆ–ç™»å½•å¤±æ•ˆæˆ–é˜…è¯»ç‰ˆæœ¬è¿‡ä½ï¼Œè¯·é‡æ–°ç™»å½•ç•ªèŒ„é‡è¯•ï¼\");\n    }\n\n}\n\n// åˆå¹¶æ•°æ®\nlet datas1 = [\n    {\n        \"title\": \"ç•ªèŒ„å®˜æ–¹ä¹¦æ¶\",\n        \"url\": base_url + \"/bookshelf?page={{page}}&cookie={{cookie.getCookie('fanqienovel.com') || java.getCookie('fanqienovel.com')}}\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.45\n        }\n    },\n    {\n        \"title\": \"ä¹¦å±±é˜…è¯»è®°å½•\",\n        \"url\": base_url + \"/bookshelf?page={{page}}&key=\" + keys,\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.45\n        }\n    }\n];\n\nconst datas2 = [{\n        \"title\": \"ä¹¦ç±æ’è¡Œæ¦œ Ù©( ËƒÌ¶ÍˆÌ€à¯°Ë‚Ì¶ÍˆÌ )Ùˆ\",\n        \"url\": \"\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 1\n        }\n    },\n    {\n        \"title\": \"æ¨èæ¦œå•\",\n        \"url\": base_url + '/discover?page={{page}}&side_type=10',\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.27\n        }\n    },\n    {\n        \"title\": \"å®Œç»“æ¦œå•\",\n        \"url\": base_url +'/discover?page={{page}}&side_type=11',\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.27\n        }\n    },\n    {\n        \"title\": \"çƒ­æœæ¦œå•\",\n        \"url\": base_url +'/discover?page={{page}}&side_type=12',\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.27\n        }\n    },\n    {\n        \"title\": \"é»‘é©¬æ¦œå•\",\n        \"url\": base_url +'/discover?page={{page}}&side_type=13',\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.27\n        }\n    },\n    {\n        \"title\": \"çˆ†æ›´æ¦œå•\",\n        \"url\": base_url + '/discover?page={{page}}&side_type=15',\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.27\n        }\n    },\n    {\n        \"title\": \"å·…å³°æ¦œå•\",\n        \"url\": base_url +'/discover?page={{page}}&type=0',\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.27\n        }\n    },\n    {\n        \"title\": \"ç”·é¢‘ç²¾é€‰\",\n        \"url\": base_url + '/discover?page={{page}}&type=2',\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.27\n        }\n    },\n    {\n        \"title\": \"å¥³é¢‘ç²¾é€‰\",\n        \"url\":base_url + '/discover?page={{page}}&type=3',\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.27\n        }\n    },\n    {\n        \"title\": \"æ¯å‘¨æ¨è\",\n        \"url\": base_url +'/discover?page={{page}}&type=1',\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.27\n        }\n    }];\nconst datas = datas1.concat(infoData, groupDatas, datas2);\n\n\nfunction generateUrl(k, k1, sort, status) {\n    return `${base_url}/discover?offset={{(page - 1) * 10}}&limit=10&tags=${data[k][k1]}&status=${status}&sort=${sort}`;\n}\n\nfor (let k in data) {\n    datas.push({\n        \"title\": \"â¦ \" + k + \"ç”Ÿé¢‘é“ â§\",\n        \"url\": \"\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 1\n        }\n    });\n    for (let k1 in data[k]) {\n        datas.push({\n            \"title\": 'à¼ºà¼´ '+k1+' à¼´à¼»',\n            \"url\": '',\n            \"style\": {\n                \"layout_flexGrow\": 1,\n                \"layout_flexBasisPercent\": 1\n            }\n        });\n        datas.push({\n            \"title\": \"æ¨èæ’è¡Œ\",\n            \"url\": generateUrl(k, k1, 0, 'ALL'),\n            \"style\": {\n                \"layout_flexGrow\": 1,\n                \"layout_flexBasisPercent\": 0.27\n            }\n        });\n        \n        datas.push({\n            \"title\": \"è¯„åˆ†æ’è¡Œ\",\n            \"url\": generateUrl(k, k1, 1, 'ALL'),\n            \"style\": {\n                \"layout_flexGrow\": 1,\n                \"layout_flexBasisPercent\": 0.27\n            }\n        });\n        \n        datas.push({\n            \"title\": \"çƒ­é—¨æ’è¡Œ\",\n            \"url\": generateUrl(k, k1, 2, 'ALL'),\n            \"style\": {\n                \"layout_flexGrow\": 1,\n                \"layout_flexBasisPercent\": 0.27\n            }\n        });\n            }\n}\n\n\n\nJSON.stringify(datas);\n</js>",
    "jsLib": "function get_key(cookie){\nlet key;\nkey = cookie.split('secretKey=');\nkey = key[key.length-1];\nreturn key\n}\n\nfunction getArguments(open_argument,key) {\n    try {\n        open_argument = JSON.parse(open_argument);\n    } catch (e) {\n        open_argument = {\n            \"media\": \"å…¨éƒ¨\",\n            \"server\": \"https://api.shusan.cc\"\n        };\n    }\n    if (key) {return open_argument[key];} else {return open_argument}\n}\n",
    "lastUpdateTime": 1738732832624,
    "loginUi": "[\n      {\n        \"name\":  \"  è¯·æ¯å’–å•¡ï¼Œç ´è§£é™åˆ¶  \",\n        \"type\": \"button\",\n        \"action\": \"vip()\"\n      },{\n        \"name\":  \"è®¾å¤‡ç®¡ç†\",\n        \"type\": \"button\",\n        \"action\": \"clear()\"\n      },{\n        \"name\":  \"æœåŠ¡å™¨åœ°å€(å¯ä¸å¡«)\",\n        \"type\": \"text\"\n        },{\n        \"name\":  \"æ›´æ–°æº\",\n        \"type\": \"button\",\n        \"action\": \"api()\"\n      },{\n        \"name\":  \"åˆ‡æ¢æœåŠ¡å™¨\",\n        \"type\": \"button\",\n        \"action\": \"set_server(server)\"\n      },{\n        \"name\":  \"å½“å‰æœåŠ¡å™¨\",\n        \"type\": \"button\",\n        \"action\": \"get_server()\"\n      },{\n        \"name\":  \"â™¥â™¥â™¥â™¥â™¥â™¥å¡«å†™å¯†é’¥â™¥â™¥â™¥â™¥â™¥â™¥\",\n        \"type\": \"button\",\n        \"action\":\"loginqt()\"\n      },{\n        \"name\":  \"ç•ªèŒ„ç™»å½•(åŒæ­¥ä¹¦æ¶)\",\n        \"type\": \"button\",\n        \"action\": \"fq_login()\"\n      },{\n        \"name\":  \" é€€å‡ºç•ªèŒ„ç™»å½• \",\n        \"type\": \"button\",\n        \"action\": \"logout()\"\n      },{\n        \"name\":  \"å½“å‰æ¥æº\",\n        \"type\": \"button\",\n        \"action\": \"getmedia()\"\n      },{\n        \"name\":  \"æœç´¢å…¨éƒ¨\",\n        \"type\": \"button\",\n        \"action\": \"set('æœç´¢å…¨éƒ¨')\"\n      },{\n        \"name\":  \"æœç´¢ç•ªèŒ„\",\n        \"type\": \"button\",\n        \"action\": \"set('ç•ªèŒ„')\"\n      },{\n        \"name\":  \"æœç´¢ä¸ƒçŒ«\",\n        \"type\": \"button\",\n        \"action\": \"set('ä¸ƒçŒ«')\"\n      },{\n        \"name\":  \"æœç´¢èµ·ç‚¹\",\n        \"type\": \"button\",\n        \"action\": \"set('èµ·ç‚¹')\"\n      },{\n        \"name\":  \"æœç´¢å¾—é—´\",\n        \"type\": \"button\",\n        \"action\": \"set('å¾—é—´')\"\n      },{\n        \"name\":  \"æœç´¢QQ\",\n        \"type\": \"button\",\n        \"action\": \"set('QQ')\"\n      },{\n        \"name\":  \"æœç´¢ç†ŠçŒ«\",\n        \"type\": \"button\",\n        \"action\": \"set('ç†ŠçŒ«')\"\n      },{\n        \"name\":  \"æœç´¢è½»å°è¯´\",\n        \"type\": \"button\",\n        \"action\": \"set('å“”å“©')\"\n      },{\n        \"name\":  \"æœç´¢èšåˆ\",\n        \"type\": \"button\",\n        \"action\": \"set('èšåˆ')\"\n      }    ]",
    "loginUrl": "function login() {\n    let zdyserver;\n    try {\n        zdyserver = String(source.getLoginInfoMap()['æœåŠ¡å™¨åœ°å€(å¯ä¸å¡«)']);\n        if (zdyserver.includes('http')) {\n            setArgument('server', zdyserver);\n            java.toast(`\\n\\nå½“å‰æœåŠ¡å™¨ä¸ºè‡ªå®šä¹‰æœåŠ¡å™¨\\n${zdyserver}\\n\\nåˆ‡æ¢æœåŠ¡å™¨è¯·å…ˆæ¸…ç©ºæœåŠ¡å™¨åœ°å€ä¸­çš„æ•°æ®`);\n        }\n    } catch (error) {\n    }\n    }\n\n\nlet server = getArgument('server');\n\nfunction gets_key() {\n    var servers = String(source.bookSourceUrl);\n    const serverList = servers.split('\\n');\n    \n    for (let server of serverList) {\n        let key = String(cookie.getCookie(server)) || String(java.getCookie(server));\n        if (key) {\n            let keyParts = key.split('secretKey=');\n            if (keyParts.length > 1) {\n                key = keyParts[keyParts.length - 1];\n                setArgument('key', key);\n                return key;\n            }\n        }\n    }\n\n    return ''; \n}\n\n// å¡«å†™å¯†é’¥\nfunction loginqt(){\n    let key = gets_key()\n    if (key && key != \"\") {\n            java.toast(\"æ‚¨å·²å¡«å†™ç§˜é’¥:\"+key);\n            return false\n        }\n    java.startBrowserAwait(getArgument('server')+'/check_key','ç™»å½•ä¹¦å±±å°è¯´ä¹¦æº');\n    key = gets_key()\n    if (key){\n        java.longToast('ç™»å½•æˆåŠŸï¼Œç§˜é’¥ï¼š'+key);\n        return true\n        } else {\n            java.toast('ç™»å½•å¤±è´¥ï¼ï¼ï¼ï¼ï¼');\n            return false\n            }\n}\n\n//ç™»å½•ç•ªèŒ„\nfunction fq_login() {\n    var cookies = cookie.getCookie('fanqienovel.com') || java.getCookie('fanqienovel.com')\n    java.log(cookies)\n    if (cookies && cookies != \"\") {\n        java.toast(\"è¯·ä¸è¦é‡å¤ç™»å½•ï¼Œè¯·å…ˆé€€å‡ºç™»å½•ï¼\")\n        return false\n    }\n    try {\n        java.startBrowserAwait(\"https://fanqienovel.com/\", \"ç™»å½•\")\n    } catch (e) {\n        java.toast(e)\n    }\n    try {\n        cookie.removeCookie(\"snssdk.com\")\n    } catch (e) {}\n    var cookies = cookie.getCookie(\"fanqienovel.com\")\n    if (!cookies || cookies == \"\") {\n        java.toast(\"ç™»å½•å¤±è´¥ï¼\")\n        return false\n    }\n    java.toast(\"ç™»å½•æˆåŠŸï¼\")\n    return true\n}\n\n//é€€å‡ºç•ªèŒ„\nfunction logout() {\n    cookie.removeCookie(\"fanqienovel.com\");\n    cookie.removeCookie(\"snssdk.com\");\n //cookie.removeCookie(getArgument('server'));\n    java.toast(\"é€€å‡ºç™»å½•æˆåŠŸ\");\n}\n\n//è·å–å‚æ•°\nfunction getArgument(key) {\n    let open_argument = source.getVariable();\n    open_argument = getArguments(open_argument,'');\n    return open_argument[key];\n}\n\n//è®¾ç½®å‚æ•°\nfunction setArgument(key, value) {\n    let open_argument = source.getVariable();\n    open_argument = getArguments(open_argument,'');\n    open_argument[key] = value;\n    open_argument = JSON.stringify(open_argument);\n    source.setVariable(open_argument);\n    return open_argument;\n}\n\n\t\t\nfunction api() { \tjava.startBrowserAwait(getArgument('server')+'/','é¦–é¡µ');\n    }\nfunction hqmy() { \tjava.startBrowserAwait(getArgument('server')+'/key','å¯†é’¥');\n    }\nfunction vip() { \tjava.startBrowserAwait(getArgument('server')+'/coffee',\"å–å’–å•¡\");\n    }\nfunction clear() { \tjava.startBrowserAwait(getArgument('server')+'/clear',\"æ¸…ç©ºè®¾å¤‡\");\n    }\n\n\nfunction set(media) {\n\t  setArgument('media',media);\n\t  java.toast(\"\\n\\nå·²åˆ‡æ¢è‡³ï¼š\"+media+'\\nè¯·é‡æ–°æœç´¢ä¹¦ç±ï¼');\n}\n\n\nfunction getmedia() {\n\t   \tlet media = getArgument('media');\n\t   \tif(media == '') {\n\t   \t\tmedia = 'å…¨éƒ¨æ¥æºéƒ½æœç´¢';\n\t   \t\t}\n\t\t\t  java.toast(\"\\n\\nå½“å‰æœç´¢èŒƒå›´æ˜¯ï¼š\"+media);\n\t\t\t  \n}\n\n//è·å–æœåŠ¡å™¨\nfunction get_server() {\n\t  var server = getArgument('server');\n    var tishi = '\\n\\nå½“å‰æœåŠ¡å™¨ï¼š'+ server\n    java.toast(tishi);\n    return server\n}\n\n\n//è®¾ç½®æœåŠ¡å™¨\nfunction set_server() {\n    let zdyserver;\n    try {\n        zdyserver = String(source.getLoginInfoMap()['æœåŠ¡å™¨åœ°å€(å¯ä¸å¡«)']);\n        if (zdyserver.includes('http')) {\n            setArgument('server', zdyserver);\n            java.toast(`\\n\\nå½“å‰æœåŠ¡å™¨ä¸ºè‡ªå®šä¹‰æœåŠ¡å™¨\\n${zdyserver}\\n\\nåˆ‡æ¢æœåŠ¡å™¨è¯·å…ˆæ¸…ç©ºæœåŠ¡å™¨åœ°å€ä¸­çš„æ•°æ®`);\n        } else {\n            zdyserver = '';\n        }\n    } catch (error) {\n        zdyserver = '';\n    }\n    ;\n    if (!zdyserver) {\n        const servers = String(source.bookSourceUrl).split('\\n').map(s => s.trim()).filter(s => s && !s.includes('æç¤º'));\n        const currentServer = getArgument('server') || '';\n        const currentIndex = servers.indexOf(currentServer);\n\n        const nextIndex = currentIndex >= 0 ? (currentIndex + 1) % servers.length : 0;\n        const nextServer = servers[nextIndex];\n\n        setArgument('server', nextServer);\n        java.toast(`\\n\\nå½“å‰æœåŠ¡å™¨${nextIndex+1}:${nextServer}\\n\\næ³¨æ„ï¼šåˆ‡æ¢æœåŠ¡å™¨åéœ€è¦åœ¨è¯¦æƒ…é¡µåˆ·æ–°ç›®å½•æ‰èƒ½ç”Ÿæ•ˆ`);\n    }\n}",
    "respondTime": 201,
    "ruleBookInfo": {
      "author": "",
      "init": "$..book_id\n<js>\nlet res = result[0];\nlet media = res.split(\"_\")[1] || 'fanqie'\nlet bookid = res.split(\"_\")[0];\nlet sjy = '';\nlet info;\nlet bookUrl = '';\nlet lx = '';\nlet zxtime = '';\nlet zxzj = '';\nlet sy = '';\nlet jj = '';\ntry {\n\t       function setArgument(key, value) {\n        let open_argument = source.getVariable();\n        open_argument = getArguments(open_argument, '');\n        open_argument[key] = value;\n        open_argument = JSON.stringify(open_argument);\n        source.setVariable(open_argument);\n        return open_argument;\n    }\n\n    function gets_key() {\n        var servers = String(source.bookSourceUrl);\n        const serverList = servers.split('\\n');\n\n        for (let server of serverList) {\n            let keys = String(cookie.getCookie(server)) || String(java.getCookie(server));\n            if (keys) {\n                let keyParts = keys.split('secretKey=');\n                if (keyParts.length > 1) {\n                    keys = keyParts[keyParts.length - 1];\n                    setArgument('key', keys);\n                    return keys;\n                }\n            }\n        }\n        return '';\n    }\n\n    let open_argument = source.getVariable();\n    let base_url = getArguments(open_argument, 'server');\n    let ms = getArguments(open_argument, 'media');\n    let key = getArguments(open_argument, 'key');\n    if (!key) {\n        key = gets_key();\n    }\n\n    var tishi = '&nbsp;&nbsp;å½“å‰æœç´¢æ¨¡å¼ï¼š' + ms + '\\n\\nå¦‚éœ€åˆ‡æ¢,è¯·ç‚¹å‡»ç™»é™†è¿›è¡Œåˆ‡æ¢\\nåˆ‡æ¢ä¹‹åéœ€è¦é‡æ–°æœç´¢ï¼\\n\\n\\u200b'\n    if (media == 'fanqie' || media == 'juxiaoshuo') {\n        try {\n            info = JSON.parse(java.ajax(`${base_url}/novel_detail?&bookid=${bookid}`));\n          try {\n                let shuyuan = info.shuyuan;\n                if (shuyuan) {\n                    let n = 0;\n                    let v = String(book.getVariable(\"custom\"));\n                    let x = v.match(/^\\d+$/) ? v : n;\n                    x = parseInt(x) < shuyuan.length ? x : n;\n                    bookUrl = shuyuan[x];\n                    bookUrl = `${base_url}/detail?bookId=${bookUrl}_juxiaoshuo`;\n                    sjy = `ğŸ¯å½“å‰ä¹¦æºã€${x}ã€‘ï¼š${shuyuan[x]}`;\n                    sy = info.sy;\n                    lx= info.lx;\n                    zxtime= info.zxtime;\n                    zxzj= info.zxzj;\n                    jj = info.abstract;\n                    jj = `${lx}\n${zxzj}\n${zxtime}\n\\u200b\n${jj}\n\\u200b\n${sjy}\n${sy}`\ninfo = {'abstract': jj}\n                }\n            } catch (error) {\n                info = {'abstract': \"\"}\n            }\n        } catch (error) {\n            info = {'abstract': \"\"}\n        }\n    } else {\n        info = {'abstract': \"\"}\n    }\n\n    if (!key) {\n        jj = '\\n\\nâŒï¸å½“å‰ç”¨æˆ·æœªå¡«å†™å¯†é’¥ï¼Œè¯·å…ˆè¾“å…¥å¯†é’¥\\nå¯†é’¥è·å–é€”å¾„ï¼Œä¹¦ç±è¯¦æƒ…é¡µï¼Œç‚¹å‡»å³ä¸Šè§’ç‚¹å‡»ç™»é™†ï¼Œè·å–åï¼Œå¡«å†™ï¼Œå†æ¬¡åˆ·æ–°è¯¦æƒ…é¡µ'\n    } else if (!info.abstract) {\n        jj = \"\"\n    } else {\n        jj = info.abstract\n    }\nif (!jj){tishi=''}\n    let data = {\n    \t   tishi:tishi,\n        info: jj,\n        bookUrl: bookUrl\n    };\n    JSON.stringify(data);\n} catch (error) {\n    JSON.stringify({info: '', bookUrl: ''});\n}\n</js>",
      "intro": "&nbsp;&nbsp;\n{{$.tishi}}\n{{$.info}}",
      "kind": "",
      "name": "",
      "tocUrl": "bookUrl"
    },
    "ruleContent": {
      "content": "content"
    },
    "ruleExplore": {
      "author": "author",
      "bookList": "$.data.data",
      "bookUrl": "{{$..book_id || ''}}|==|{{$..book_name || ''}}|==|{{$..author || ''}}|==|{{$..thumb_url || ''}}\n<js>\nfunction setArgument(key, value) {\n    let open_argument = source.getVariable();\n    open_argument = getArguments(open_argument,'');\n    open_argument[key] = value;\n    open_argument = JSON.stringify(open_argument);\n    source.setVariable(open_argument);\n    return open_argument;\n}\n\nfunction gets_key() {\n    var servers = String(source.bookSourceUrl);\n    const serverList = servers.split('\\n');\n    \n    for (let server of serverList) {\n        let keys = String(cookie.getCookie(server)) || String(java.getCookie(server));\n        if (keys) {\n            let keyParts = keys.split('secretKey=');\n            if (keyParts.length > 1) {\n                keys = keyParts[keyParts.length - 1];\n                setArgument('key', keys);\n                return keys;\n            }\n        }\n    }\n    return '';  \n }\n\nlet open_argument = source.getVariable();\nlet base_url = getArguments(open_argument,'server');\nlet media = getArguments(open_argument,'media');\nlet key = getArguments(open_argument,'key');\nif (!key) {\n\tkey = gets_key();\n\t}\n\n\nlet [book_id, raw_book_name, raw_author, raw_thumb_url] = result.split(\"|==|\");\n\nlet book_name = java.base64Encode(raw_book_name);\nlet author = java.base64Encode(raw_author);\nlet thumb_url = java.base64Encode(raw_thumb_url);\n\nlet catalogue_url = `${base_url}/detail?bookId=${book_id}&book_name=${book_name}&author=${author}&thumb_url=${thumb_url}`;\n\ncatalogue_url\n</js>",
      "coverUrl": "thumb_url",
      "intro": "abstract",
      "kind": "{{$.category}}\n{{$.score}}\n{{$.status}}\n{{$.source}}\n{{$.tags}}",
      "lastChapter": "{{$.last_chapter_title}} â€¢ {{$.last_update_time}}",
      "name": "book_name",
      "wordCount": "word_number"
    },
    "ruleSearch": {
      "author": "author",
      "bookList": "$..book_data[*]",
      "bookUrl": "{{$..book_id || ''}}|==|{{$..book_name || ''}}|==|{{$..author || ''}}|==|{{$..thumb_url || ''}}\n<js>\nfunction setArgument(key, value) {\n    let open_argument = source.getVariable();\n    open_argument = getArguments(open_argument,'');\n    open_argument[key] = value;\n    open_argument = JSON.stringify(open_argument);\n    source.setVariable(open_argument);\n    return open_argument;\n}\n\nfunction gets_key() {\n    var servers = String(source.bookSourceUrl);\n    const serverList = servers.split('\\n');\n    \n    for (let server of serverList) {\n        let keys = String(cookie.getCookie(server)) || String(java.getCookie(server));\n        if (keys) {\n            let keyParts = keys.split('secretKey=');\n            if (keyParts.length > 1) {\n                keys = keyParts[keyParts.length - 1];\n                setArgument('key', keys);\n                return keys;\n            }\n        }\n    }\n    return '';  \n }\n\nlet open_argument = source.getVariable();\nlet base_url = getArguments(open_argument,'server');\n\n\nlet [book_id, raw_book_name, raw_author, raw_thumb_url] = result.split(\"|==|\");\n\nlet book_name = java.base64Encode(raw_book_name);\nlet author = java.base64Encode(raw_author);\nlet thumb_url = java.base64Encode(raw_thumb_url);\n\nlet catalogue_url = `${base_url}/detail?bookId=${book_id}&book_name=${book_name}&author=${author}&thumb_url=${thumb_url}`;\n\ncatalogue_url\n</js>",
      "checkKeyWord": "æˆ‘çš„",
      "coverUrl": "thumb_url",
      "intro": "{{$.media}}å°è¯´ \n{{$.abstract}}",
      "kind": "category&&status&&score&&last_chapter_update_time",
      "lastChapter": "{{$.media}}-{{$..book_id}}\n<js>\nfunction lastChapterTitle(media,bookid) {\n   \n    let url;\n    let last;\n    if (media == \"ç•ªèŒ„\") {\n    \t    last=fq_last(bookid);\n        return last\n    } else if (media == \"ä¸ƒçŒ«\") {\n    \t   last=qm_last(bookid);\n        return last\n        \n    } else {\n    \treturn ''\n    \t}\n}\n\n\nfunction fq_last(bookid) {\n\tlet url = `https://api5-normal-sinfonlineb.fqnovel.com/reading/bookapi/multi-detail/v/?aid=1967&iid=1&version_code=999&book_id=${bookid}`;\n        let last =JSON.parse(java.ajax(url)).data[0]; \n        return last[\"last_chapter_title\"]+\" Â· \"+java.timeFormat(last[\"last_chapter_update_time\"]*1000);\n\t\n\t}\n\nfunction qm_last(bookid) {\n\tlet headers={'app-version':'51110','platform':'android','reg':'0','AUTHORIZATION':'','application-id':'com.****.reader','net-env':'1','channel':'unknown','qm-params':''}\n\tsign_key='d3dGiJc651gSQ8w1'\n\nparams={'id':bookid, 'imei_ip':'2937357107','teeny_mode':0}\n\nvar urlEncode = function (param, key, encode) {  \n  if(param==null) return '';  \n  var paramStr = '';  \n  var t = typeof (param);  \n  if (t == 'string' || t == 'number' || t == 'boolean') {  \n    paramStr += '&' + key + '=' + ((encode==null||encode) ? encodeURIComponent(param) : param);  \n  } else {  \n    for (var i in param) {  \n      var k = key == null ? i : key + (param instanceof Array ? '[' + i + ']' : '.' + i);  \n      paramStr += urlEncode(param[i], k, encode);  \n    }  \n  }  \n  return paramStr;  \n};\nparamSign=String(java.md5Encode(Object.keys(params).sort().reduce((pre,n)=>pre+n+'='+params[n],'')+sign_key));\nheaderSign=String(java.md5Encode(Object.keys(headers).sort().reduce((pre,n)=>pre+n+'='+headers[n],'')+sign_key))\nparams['sign']=paramSign;\nheaders['sign']=headerSign;\nlet url = \"https://api-bc.wtzw.com/api/v4/book/detail?\"+urlEncode(params);\noption = {'headers':headers};\nlet last =JSON.parse(java.ajax(url+','+JSON.stringify(option)))[\"data\"][\"book\"];\nlet last2 =  `${last[\"latest_chapter_title\"]} Â· ${java.timeFormat(last['update_time']*1000)} `\n\treturn last2\n\t}\nlet media = result.split(\"-\")[0];\nlet bookid = result.split(\"-\")[1].split(\"_\")[0];\nlet lasts = lastChapterTitle(media,bookid);\n`${media}: ${lasts}`\n</js>",
      "name": "book_name",
      "wordCount": "word_number"
    },
    "ruleToc": {
      "chapterList": "$..chapterListWithVolume[*].*",
      "chapterName": "title",
      "chapterUrl": "{{$..itemId}}|==|{{$..book_id || ''}}|==|{{$..book_name || ''}}|==|{{$..author || ''}}|==|{{$..thumb_url || ''}}|==|{{$..media || ''}}\n@js:\nfunction setArgument(key, value) {\n    let open_argument = source.getVariable();\n    open_argument = getArguments(open_argument,'');\n    open_argument[key] = value;\n    open_argument = JSON.stringify(open_argument);\n    source.setVariable(open_argument);\n    return open_argument;\n}\n\nfunction gets_key() {\n    var servers = String(source.bookSourceUrl);\n    const serverList = servers.split('\\n');\n    \n    for (let server of serverList) {\n        let keys = String(cookie.getCookie(server)) || String(java.getCookie(server));\n        if (keys) {\n            let keyParts = keys.split('secretKey=');\n            if (keyParts.length > 1) {\n                keys = keyParts[keyParts.length - 1];\n                setArgument('key', keys);\n                return keys;\n            }\n        }\n    }\n    return '';  \n }\n\nlet open_argument = source.getVariable();\nlet base_url = getArguments(open_argument,'server');\nlet key = getArguments(open_argument,'key');\nif (!key) {\n\tkey = gets_key();\n\t}\n\n\n// è®¾å¤‡ç±»å‹æ£€æµ‹\nlet device, devicetype;\ntry {\n    devicetype = java.androidId();\n    device = 'android';\n} catch (e) {\n    devicetype = java.deviceID();\n    device = 'ios';\n}\n\n// æ•°æ®\nlet [itemId, book_id, book_name, author, thumb_url, media] = result.split(\"|==|\");\n\nif(!key) {\n    java.longToast('\\n\\nè¯·å…ˆè¾“å…¥å¯†é’¥\\nå¯†é’¥è·å–é€”å¾„ï¼Œä¹¦ç±è¯¦æƒ…é¡µï¼Œç‚¹å‡»å³ä¸Šè§’ç‚¹å‡»ç™»é™†ï¼Œè·å–åï¼Œå¡«å†™ï¼Œå†æ¬¡åˆ·æ–°è¯¦æƒ…é¡µ');\n}\n\nlet catalogue_url = `${base_url}/reader?item_id=${itemId}&book_id=${book_id}&tone_id=-1&key=${key}&device=${devicetype}&book_name=${book_name}&author=${author}&thumb_url=${thumb_url}&media=${media}`;\n\ncatalogue_url",
      "updateTime": "firstPassTime"
    },
    "searchUrl": "{{key}}\n@js:\nlet search_title = result;\nfunction setArgument(key, value) {\n    let open_argument = source.getVariable();\n    open_argument = getArguments(open_argument,'');\n    open_argument[key] = value;\n    open_argument = JSON.stringify(open_argument);\n    source.setVariable(open_argument);\n    return open_argument;\n}\n\nfunction gets_key() {\n    var servers = String(source.bookSourceUrl);\n    const serverList = servers.split('\\n');\n    \n    for (let server of serverList) {\n        let keys = String(cookie.getCookie(server)) || String(java.getCookie(server));\n        if (keys) {\n            let keyParts = keys.split('secretKey=');\n            if (keyParts.length > 1) {\n                keys = keyParts[keyParts.length - 1];\n                setArgument('key', keys);\n                return keys;\n            }\n        }\n    }\n    return '';  \n }\n\nlet open_argument = source.getVariable();\nlet base_url = getArguments(open_argument,'server');\nlet media = getArguments(open_argument,'media');\nlet key = getArguments(open_argument,'key');\nif (!key) {\n\tkey = gets_key();\n\t}\nbase_url+'/searchNovel?title='+result+'&media='+media",
    "variableComment": "",
    "weight": 63
  },
  {
    "bookSourceComment": "åç«¯phpåŠç§˜é’¥byå¤ç­\nä¹¦æºby  budingå¤§ä½¬\nv5æ¥å£by æ¸…è¯å¤§ä½¬",
    "bookSourceGroup": "å¤ç­çš„ç•ªèŒ„",
    "bookSourceName": "å¤ç­ç•ªèŒ„",
    "bookSourceType": 0,
    "bookSourceUrl": "https://fanqie.acgkami.com",
    "customOrder": 0,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "@js:\n\nlet sort = [];\npush = (title, url, type) => sort.push({\n    title: title,\n    url: url,\n    style: {\n        layout_flexBasisPercent: type\n    }\n});\n    push('ç•ªèŒ„ä¹¦æ¶', 'https://fanqienovel.com/reading/bookapi/bookshelf/info/v:version/?aid=1967&iid=0&version_code=56910&update_version_code=56910', 1);\n    push('å·…å³°æ¦œå•', 'https://fanqienovel.com/api/author/misc/top_book_list/v1/?limit=100&offset=0', 0.29);\n    push('å‡ºç‰ˆæ¦œå•', 'https://fanqienovel.com/api/node/publication/list?page_index=0&page_count=100', 0.29);\n    push('çˆ†æ›´æ¦œå•', 'https://api-lf.fanqiesdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&limit=50&offset=0&side_type=15&type=1', 0.29);\n    push('é»‘é©¬æ¦œå•', 'https://api-lf.fanqiesdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&limit=50&offset=0&side_type=13&type=1', 0.29);\n    push('çƒ­æœæ¦œå•', 'https://api-lf.fanqiesdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&limit=50&offset=&side_type=12&type=1', 0.29);\t\n    push('æ¯å‘¨æ¨è', 'https://fanqienovel.com/api/rank/recommend/list?type=1&limit=10&offset=0', 0.29);\t\n\t\n\tA=[[\"æ¨è\",\"10\"],[\"å®Œç»“\",\"11\"],[\"çƒ­æœ\",\"12\"]]\t;\n[[\"ç”·é¢‘\",\"1\"],[\"å¥³é¢‘\",\"0\"]].map([title,id]=>{\n\tpush('â¤ï¸'+title+'æ¦œå•â¤ï¸', null, 1);\n\tif(id==2){ \tA=A.slice(1,A.length-1) }\n\t\tA.map([title,uri]=>{\t\t\t\n\t\t  \turl= `https://novel.snssdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&app_name=news_article&app_version=9.7.3&channel=tengxun_tt&device_platform=android&os=android&device_type=ProjectTitan&os_api=29&os_version=10&openlive_plugin_status=1&isTTWebViewHeifSupport=0&limit=100&offset={{(page-1)*100}}&side_type=${uri}&type=${id}`;\n\t\t\t\tpush(title, url, 0.29);\t\t\t\n\t\t\t});\n\t});\t\n\t\n\tcategory = () =>{\n\t\t\tcategory_url = \"https://novel.snssdk.com/api/novel/channel/homepage/new_category/page/data/v1/?aid=13\";\nreturn  JSON.parse(java.ajax(category_url)).data\t\t\n\t\t}\n\t\t  \n  json = (data) => {\n     boy = data.boy_category;\n     girl = data.girl_category;\n     publish = data.publish_category;\n     json = [[\"ç”·é¢‘\",\"gender=1\",boy],[\"å¥³é¢‘\",\"gender=0\",girl],[\"å‡ºç‰ˆ\",\"genre_type=160\",publish]];\n     return JSON.parse(JSON.stringify(json));\n   }\t\n\t\tjson(category()).map([tit1,gender,category]=>{\n\t    push('â¤ï¸'+tit1+'â¤ï¸', null, 1);\n     category.map(($,index)=>{\n     \tindex++;\n\t    title = $.category_name;\n     \tcid = $.category_id;\n\t    url=  `https://novel.snssdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&app_name=news_article&app_version=9.7.3&channel=tengxun_tt&creation_status=9&device_platform=android&enter_from=novel_category&novel_host&novel_version&version_code=973&version_name=9.7.3&word_count=9&os=android&device_type=ProjectTitan&os_api=29&os_version=10&offset={{(page-1)*100}}&limit=100&category_id=${cid}&${gender}`;\n\t\t\t\tpush(title, url, 0.29);\t\n      });\n  });\nJSON.stringify(sort);",
    "jsLib": "let replaceCover = (u) => {\n  if (u.startsWith(\"https://\")) u = u.substring(8)\n  else u = u.substring(7)\n  let uArr = u.split(\"/\")\n  uArr[0] = \"https://p6-novel.byteimg.com/origin\"\n  let uArr2 = []\n  uArr.forEach((x) => {\n    if (!x.includes(\"?\") && !x.includes(\"~\")) uArr2.push(x)\n    else uArr2.push(x.split(\"~\")[0])\n  })\n  u = uArr2.join(\"/\")\n  return u\n}\n\nfunction getNovelComment(book_id, type) {\n    const { java, source, book } = this\n    if (type == 0) {\n    let count = book.getVariable(\"custom\")\n    if (count && count == \"\") count = 20\n    let res = java.ajax(`https://changdunovel.com/reading/ugc/novel_comment/book/v1?query_type=0&offset=0&count=${count}&sort=create_time&need_hot_comment=0&book_id=${book_id}&aid=1967&addQueryPrefix=true`) \n    let comments = JSON.parse(res).data.comment\n    let result = `${comments.length>0?(\"(å…± \"+ comments.length +\" æ¡)\"):\"\"}\\n`\n    comments.forEach(c => {\n        let startNum = 5 - parseInt(c.score/2)\n        result += `${c.user_info.gender==1?\"ğŸ‘¨ğŸ»\":\"ğŸ‘±ğŸ»\"} ${c.user_info.user_name} || ${\"â˜…â˜…â˜…â˜…â˜…â˜…â˜†â˜†â˜†â˜†â˜†\".slice(startNum, startNum + 5)}\\n${c.text.replace(/###\\s/g,'')}\\n&lrm;\\n`\n    })\n    return result\n    } \n  result = \"\"\n  return result\n}",
    "lastUpdateTime": 1753703976925,
    "loginCheckJs": "if (source.getVariable()==\"\") {\n    source.setVariable(\"v1\")\n}\nresult",
    "loginUi": "[{\n    \"name\": \"å¯†é’¥\",\n    \"type\": \"password\",\n    \"style\": {\n      \"layout_flexGrow\": 1,\n      \"layout_flexBasisPercent\": 0.4\n    }\n  },\n  {\n    \"name\": \"è·å–å¯†é’¥\",\n    \"type\": \"button\",\n    \"action\": \"getkey()\",\n    \"style\": {\n      \"layout_flexGrow\": 1,\n      \"layout_flexBasisPercent\": 0.4\n    }\n  },\n  {\n    \"name\": \"ç•ªèŒ„ç™»å½•\",\n    \"type\": \"button\",\n    \"action\": \"getcookie()\",\n    \"style\": {\n      \"layout_flexGrow\": 1,\n      \"layout_flexBasisPercent\": 0.4\n    }\n  },\n  {\n    \"name\": \"æ­£æ–‡æ¥å£\",\n    \"type\": \"button\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 1\n  }\n},\n  {\n    \"action\": \"setjk('v1')\",\n    \"name\": \"V1\",\n    \"type\": \"button\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n{\n    \"action\": \"setjk('v2')\",\n    \"name\": \"V2\",\n    \"type\": \"button\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n{\n    \"action\": \"setjk('v3')\",\n    \"name\": \"V3\",\n    \"type\": \"button\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n{\n    \"action\": \"setjk('v4')\",\n    \"name\": \"V4\",\n    \"type\": \"button\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n{\n    \"action\": \"setjk('v5')\",\n    \"name\": \"V5\",\n    \"type\": \"button\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n}\n]",
    "loginUrl": "function login(){}\nfunction getkey(){\tjava.startBrowserAwait('https://fanqie.acgkami.com', \"è·å–å¯†é’¥\");\n}\nfunction getcookie(){\tjava.startBrowserAwait('https://fanqienovel.com/', \"ç•ªèŒ„ç™»å½•\");\n}\nfunction setjk(jk){\n\tsource.setVariable(jk)\n\tjava.toast(\"æ­£æ–‡æ¥å£å·²åˆ‡æ¢è‡³\"+jk)\n\t}",
    "respondTime": 180000,
    "ruleBookInfo": {
      "author": "$..author",
      "coverUrl": "@js:replaceCover(java.getString(\"$..thumb_url\"))",
      "init": "<js>\nbook_id=java.hexDecodeToString(result)\nurl=`https://fanqie.acgkami.com/book.php?book_id=${book_id}&sign={{source.getLoginInfoMap().get('å¯†é’¥')}}`\nresult=java.ajax(url)\n</js>\n$.data[*]",
      "intro": "&nbsp;&nbsp;\nğŸ“• æºåï¼š{{$..original_book_name}}\nğŸ“” åˆ«åï¼š{{$..book_flight_alias_name}}\nğŸ†” ç¼–å·ï¼š{{$..book_id}}\nğŸ“‡ çŠ¶æ€ï¼š__status__-è¿è½½{{$..creation_status}}å®Œç»“\nâœï¸ å¼€å‘ï¼š{{$..create_time##T|\\+.*## }}\nğŸ•° æ›´æ–°ï¼š{{java.timeFormatUTC(java.getString(\"$..last_chapter_update_time\")*1000,'yyyy-MM-dd HH:mm:ss',28800000)}}\nâŒ¨ï¸ å­—æ•°ï¼š{{$..word_number}}å­—\nğŸ‘¤ ä¸»è§’ï¼š{{$..roles##\\[|\\\"|\\]}}\nğŸ“Š è¯„åˆ†ï¼š{{$..score}}åˆ†\nğŸ‘ï¸ åœ¨çº¿ï¼š{{$..read_count}}äººåœ¨è¯»\nğŸ”— æºç«™ï¼š{{$..source##ï¼Œ.*|æˆæƒå‘è¡Œ##}}\nğŸ“œ ç®€ä»‹ï¼š\n{{$..abstract}}\nğŸ“ ä¹¦è¯„ï¼š{{getNovelComment(java.getString(\"$..book_id\"),java.get(\"type\"))}} \nğŸ“ {{$..copyright_info##ï¼Œ.*|ä¿¡æ¯##}}\n##è¿è½½0|1å®Œç»“|ç”·ç”Ÿ0|1å¥³ç”Ÿ\n@js:result.replace(/...åˆ«å+ï¼š\\n/g,\"\").replace(/....æ•°+ï¼š\\n/,\"\").replace(/....è¯„+ï¼š\\n/,\"ğŸ“ ä¹¦è¯„ï¼šæ— \").replace(/....è§’+ï¼š\\n/,\"\").replace(\"ç”·ç”Ÿ2å¥³ç”Ÿ\",\"å‡ºç‰ˆ\").replace('__status__', (java.getString('$..book_search_visible') == 'true' ? 'æ­£å¸¸' : (java.getString('$..tomato_book_status') == '3' ? 'ä¸‹æ¶' : 'å°é»‘å±‹')))\n.replace(\"è¿è½½4å®Œç»“\",\"æ–­æ›´\")\n.replace(\"è¿è½½-1å®Œç»“\",\"æœªçŸ¥\");",
      "kind": "ç”·ç”Ÿ{{$..gender}}å¥³ç”Ÿ\n{{$..category}}\nè¿è½½{{$..creation_status}}å®Œç»“\n{{$..score}}åˆ†\n{{java.timeFormatUTC(java.getString(\"$..last_chapter_update_time\")*1000,'yyyy-MM-dd',28800000)}}\n##è¿è½½0|1å®Œç»“|ç”·ç”Ÿ0|1å¥³ç”Ÿ\n@js:result\n.replace(\"ç”·ç”Ÿ2å¥³ç”Ÿ\",\"å‡ºç‰ˆ\")\n.replace(\"è¿è½½4å®Œç»“\",\"æ–­æ›´\")\n.replace(\"è¿è½½-1å®Œç»“\",\"æœªçŸ¥\");",
      "lastChapter": "$..last_chapter_title",
      "name": "$..book_name##ï¼ˆåˆ«åï¼š.*?ï¼‰",
      "tocUrl": "$..book_id\n<js>\n`data:;base64,${java.base64Encode(result)},{\"type\":\"å¤ç­\"}`\n</js>",
      "wordCount": "$..word_number"
    },
    "ruleContent": {
      "content": "<js>\nitemId=java.hexDecodeToString(result)\nurl=`https://fanqie.acgkami.com/content.php?item_id=${itemId}&source={{source.getVariable()}}&sign={{source.getLoginInfoMap().get('å¯†é’¥')}}`\nresult=JSON.parse(java.ajax(url)).content\n</js>\n@@p@html"
    },
    "ruleExplore": {
      "author": "$.author##</?em>",
      "bookList": "<js>\nlet list = [];\nlet resultData = JSON.parse(result);\n\nlet targetData = resultData.data || resultData.list || resultData.book_list || \n                resultData.publication_list || resultData.result || resultData;\n                \nif (targetData != null && targetData.book_shelf_info) {\n    let bookIds = targetData.book_shelf_info.map(item => `{\"book_id\": \"${item.book_id}\"}`).join(',');\n    \n    let booksData = java.ajax(\n`https://fanqienovel.com/api/bookshelf/multidetail,{\"method\": \"post\",\"body\": {\"books\":[${bookIds}]}}`\n        );\n    \n    let books = JSON.parse(booksData).data.detail_list;\n    for (let i in books) {\n        let d = books[i];\n        list.push({\n            src: d,\n            book_name: d.book_name,\n            author: d.author,\n            category:d.category,\n            tags:d.tags,\n            word_number:d.word_number,\n            lastChapterTitle: d.last_chapter_title,\n            abstract: d.abstract,\n            book_id: d.book_id,\n        });\n    }\n} else {\n    list = targetData.content || targetData;\n}\n\nJSON.stringify({data: list})\n</js>\ndata.data||data.list||book_list||data.publication_list||data.result||data",
      "bookUrl": "$.book_id||$.bookId\n<js>\n`data:;base64,${java.base64Encode(result)},{\"type\":\"å¤ç­\"}`\n</js>",
      "coverUrl": "http://p6-novel.byteimg.com/large/{$.thumb_uri}||$.thumb_url||thumbUri",
      "intro": "$.abstract",
      "kind": "$.category&&$.source",
      "lastChapter": "$.last_chapter_title",
      "name": "$.book_name||$.bookName",
      "wordCount": "$.word_number"
    },
    "ruleSearch": {
      "author": "author",
      "bookList": "data.ret_data[*]",
      "bookUrl": "book_id\n<js>\n`data:;base64,${java.base64Encode(result)},{\"type\":\"å¤ç­\"}`\n</js>",
      "coverUrl": "@js:replaceCover(java.getString(\"thumb_url\"))",
      "intro": "abstract",
      "kind": "è¿è½½{{$.creation_status}}å®Œç»“\n{{$.score}}åˆ†\n{{$.category}}\n##è¿è½½0|1å®Œç»“\n@js:result\n.replace(\"è¿è½½4å®Œç»“\",\"æ–­æ›´\")\n.replace(\"è¿è½½-1å®Œç»“\",\"æœªçŸ¥\");",
      "name": "title##ï¼ˆåˆ«å.*?ï¼‰"
    },
    "ruleToc": {
      "chapterList": "<js>\nbook_id=java.hexDecodeToString(result)\nurl=`https://fanqie.acgkami.com/xq.php?book_id=${book_id}&sign={{source.getLoginInfoMap().get('å¯†é’¥')}}`\nr=JSON.parse(java.ajax(url)).data.chapterListWithVolume\nJSON.stringify(r)\n</js>$[*].[*]",
      "chapterName": "$.title",
      "chapterUrl": "$.itemId\n<js>\n`data:;base64,${java.base64Encode(result)},{\"type\":\"å¤ç­\"}`\n</js>",
      "updateTime": "{{$.volume_name}} | {{java.timeFormatUTC(java.getString(\"firstPassTime\") * 1000, 'yyyy-MM-dd HH:mm:ss',28800000)}}\n@js:\nif (result.startsWith(\" |\")) result = result.slice(2)\nif (result.startsWith(\"| \")) result = result.slice(2)\nresult"
    },
    "searchUrl": "https://fanqie.acgkami.com/search.php?key={{key}}&page={{page}}\n@js:\nif (key.length == 19 && !Number.isNaN(parseInt(key))) {\n  result = `data:;base64,${java.base64Encode(key)},{\"type\":\"å¤ç­\"}`\n}\nresult",
    "weight": 0
  },
  {
    "bookSourceComment": "æ”¯æŒ:ç•ªèŒ„ ä¸ƒçŒ« çŒ«çœ¼ å¾—é—´  ä¹¦æ—— æ»´æ»´",
    "bookSourceGroup": "ğŸ…ç•ªèŒ„",
    "bookSourceName": "ğŸ…èšåˆä¹¦æº",
    "bookSourceType": 0,
    "bookSourceUrl": "https://fqphp.gxom.cn/",
    "customOrder": 4,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "@js:\n\nlet type = [\"ç•ªèŒ„å°è¯´\", \"ç•ªèŒ„çŸ­å‰§\",\"ä¸ƒçŒ«å°è¯´\", \"ä¹¦æ——å°è¯´\", \"å¾—é—´å°è¯´\", \"çŒ«çœ¼çœ‹ä¹¦\", \"æ»´æ»´å°è¯´\"];  \nlet ç•ªèŒ„å°è¯´ = [\"ä¹¦æ¶\", \"éƒ½å¸‚\", \"æ¢æ¡ˆ\", \"å†å²\", \"å¼‚ç•Œ\", \"æ¸¸æˆ\", \"å¥¥ç‰¹\", \"ä¸‡ç•Œ\", \"ç›—å¢“\", \"æ˜æ˜Ÿ\", \"åŠ¨æ¼«\", \"è„‘æ´\", \"çµå¼‚\", \"æ‚¬ç–‘\", \"ç„å¹»\", \"ä»™ä¾ \", \"æ— æ•Œ\", \"å¤§ç§¦\", \"æ˜æœ\", \"ä¸‰å›½\", \"å¤§å”\", \"å®‹æœ\", \"æ¸…æœ\", \"æ¨ç†\", \"é‰´å®\", \"æµ·è´¼\", \"æ­¦å°†\", \"å›½è¿\", \"ä¹¡æ‘\", \"æ´ªè’\", \"ç©ºé—´\", \"ç¾¤èŠ\"];  \nlet ç•ªèŒ„çŸ­å‰§ = [\"é€†è¢­\", \"æ€»è£\", \"ç°è¨€\", \"æ‰“è„¸\", \"é©¬ç”²\", \"è±ªé—¨\", \"éƒ½å¸‚\", \"ç¥è±ª\"]; \nlet ä¸ƒçŒ«å°è¯´ = [\"éƒ½å¸‚\", \"å¼‚æœ¯\", \"ç„å¹»\", \"æ­¦ä¾ \", \"å¥‡é—»\", \"å†å²\", \"æ¸¸æˆ\", \"ç§‘å¹»\", \"ä½“è‚²\", \"å½±è§†\", \"ç©¿è¶Š\", \"é‰´å®\", \"é‡ç”Ÿ\", \"è¡€è„‰\", \"ç­¾åˆ°\", \"å¤ä»‡\", \"ä¸¹è¯\", \"åŒ»ç”Ÿ\", \"æˆ˜ç¥\", \"çš‡å¸\", \"çƒ­è¡€\", \"çˆ½æ–‡\", \"æ‚¬ç–‘\", \"å¼ƒå°‘\"];  \nlet ä¹¦æ——å°è¯´ = [\"éƒ½å¸‚\", \"ç„å¹»\", \"ä»™ä¾ \", \"çµå¼‚\", \"å†å²\", \"æ¸¸æˆ\", \"ç§‘å¹»\", \"å¥‡å¹»\", \"ç«æŠ€\", \"ç°è¨€\", \"å¤è¨€\", \"æ ¡å›­\"];  \nlet å¾—é—´å°è¯´ = [\"éƒ½å¸‚\", \"ç„å¹»\", \"ä»™ä¾ \", \"æ­¦ä¾ \", \"ç§‘å¹»\", \"æ ¡å›­\", \"æ¸¸æˆ\", \"å†å²\"];  \nlet çŒ«çœ¼çœ‹ä¹¦ = [\"ç„å¹»\", \"æ­¦ä¾ \", \"éƒ½å¸‚\", \"ä»™ä¾ \", \"å†›äº‹\", \"å†å²\", \"æ¸¸æˆ\", \"ç§‘å¹»\"];  \nlet æ»´æ»´å°è¯´ = [\"ç„å¹»\", \"éƒ½å¸‚\", \"æ­¦ä¾ \", \"ä»™ä¾ \", \"å†›äº‹\", \"å†å²\", \"æ¸¸æˆ\", \"ç§‘å¹»\"];  \n\nJSON.stringify(  \n    type.reduce((arr, x) => {  \n        arr.push({  \n            title: x,  \n            url: \"\",  \n            style: { layout_flexBasisPercent: 1 }  \n        });  \n        eval(x).forEach(k => {  \n            arr.push({  \n                title: k,  \n                url: `{{source.bookSourceUrl}}syfx?lx=${x}&ck=${ck()}&fl=${k}&page={{page}}`,  \n                style: { layout_flexBasisPercent: 0.2 }  \n            });  \n        });  \n        return arr;  \n    }, [])  \n);",
    "jsLib": "function ck() {\n    let ck = String(this.cookie.getCookie(\"fanqienovel.com\").match(/sessionid=([^;]*)/)?.[1] || '');\n    return ck;\n}\n\n\nfunction Map(e) {\n    const { source } = this;\n    var infomap = source.getLoginInfoMap();\n    try {\n        return String(infomap[e]);\n    } catch (err) {\n        return \"\";\n    }\n}\n\nfunction W() {\n    let W = String('7jK9pR2sL5qW').replace(/j|W|p|9|R|5/g, \"\");\n        return W;\n}\n\n\n   \n\n\n    ",
    "lastUpdateTime": 1753902906904,
    "loginUi": "\n[\n \t \n{\n        name: \" è·å–å¯†é’¥ \",\n        type: \"button\",\n        action: \"my(my)\",\n    \t\t style: {\n    \t\t \tlayout_flexGrow: 1,\n    \t\t \tlayout_flexBasisPercent: 0.45\n    \t\t \t}\n    },\n\n{\n        name: \" ä¹¦æºæ›´æ–° \",\n        type: \"button\",\n        action: \"renderVersionPage()\",\n    \t\t style: {\n    \t\t \tlayout_flexGrow: 1,\n    \t\t \tlayout_flexBasisPercent: 0.45\n    \t\t \t}\n    },\n\n   \n  {\n        name: \" å¼€å¯æ®µè¯„ \",\n        type: \"button\",\n        action: \"kqdp(kqdp)\",\n    \t\t style: {\n    \t\t \tlayout_flexGrow: 1,\n    \t\t \tlayout_flexBasisPercent: 0.45\n    \t\t \t}\n    },\n\n{\n        name: \" å…³é—­æ®µè¯„ \",\n        type: \"button\",\n        action: \"gbdp(gbdp)\",\n    \t\t style: {\n    \t\t \tlayout_flexGrow: 1,\n    \t\t \tlayout_flexBasisPercent: 0.45\n    \t\t \t}\n    },\n    {\n        name: \"å¯†é’¥\",\n        type: \"password\",       \n    \t\t style: {\n    \t\t \tlayout_flexGrow: 1,\n    \t\t \tlayout_flexBasisPercent: 1\n    \t\t \t}\n    },\n{\n        name: \"é¢œè‰²\",\n        type: \"text\",       \n    \t\t style: {\n    \t\t \tlayout_flexGrow: 1,\n    \t\t \tlayout_flexBasisPercent: 1\n    \t\t \t}\n    },\n{\n        name: \"æ°”æ³¡\",\n        type: \"text\",       \n    \t\t style: {\n    \t\t \tlayout_flexGrow: 1,\n    \t\t \tlayout_flexBasisPercent: 1\n    \t\t \t}\n    }\n\n]",
    "loginUrl": "\nfunction login() {}\n\nfunction my(my) {\njava.startBrowserAwait(source.bookSourceUrl+'userd.php',\"è·å–å¯†é’¥\");\n}\n\nfunction kqdp(kqdp) {\njava.put(\"dp\", \"å¼€å¯\");\njava.toast(\"æ®µè¯„å¼€å¯\");\n}\n\nfunction gbdp(gbdp) {\njava.put(\"dp\", \"å…³é—­\");\njava.toast(\"æ®µè¯„å…³é—­\");\n}\n\nfunction renderVersionPage() {\n  let html = `\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>fqphp_ä¹¦æºæ›´æ–°</title>\n  <style>\n    :root {\n      --md-blue-primary: #2196F3;\n      --md-blue-dark: #1976D2;\n      --md-blue-light: #BBDEFB;\n      --md-gray-light: #f5f5f5;\n      --md-text-primary: #212121;\n      --md-text-secondary: #757575;\n    }\n\n    body { \n      margin: 0; \n      padding: 1em; \n      font-family: 'Roboto', 'Segoe UI', sans-serif; \n      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); \n      display: flex; \n      justify-content: center; \n      align-items: center; \n      min-height: 100vh; \n    }\n    \n    .container { \n      width: 100%; \n      max-width: 480px; \n      background: white; \n      border-radius: 8px; \n      padding: 2em 1em; \n      box-shadow: 0 2px 10px rgba(0,0,0,0.1); \n      text-align: center; \n    }\n    \n    .button { \n      display: block; \n      width: 90%; \n      margin: 0 auto 1em; \n      padding: 0.85em; \n      text-align: center; \n      font-size: 1em; \n      border: none; \n      border-radius: 4px; \n      text-decoration: none; \n      background: var(--md-blue-primary); \n      color: white; \n      font-weight: 500; \n      transition: all 0.2s ease; \n      box-shadow: 0 2px 5px rgba(0,0,0,0.2); \n    }\n    \n    .button:hover { \n      background: var(--md-blue-dark); \n      box-shadow: 0 4px 8px rgba(0,0,0,0.25); \n      transform: translateY(-1px); \n    }\n    \n    .button:active { \n      transform: translateY(1px); \n      box-shadow: 0 1px 3px rgba(0,0,0,0.2); \n    }\n\n    .tutorial-button {\n      background: #4CAF50;\n    }\n    \n    .tutorial-button:hover {\n      background: #388E3C;\n    }\n    \n    .logs { \n      background: white; \n      padding: 1.2em; \n      border-radius: 4px; \n      border: 1px solid #e0e0e0; \n      text-align: left; \n      margin-top: 1em;\n    }\n    \n    .logs h2 { \n      font-size: 1.1em; \n      margin: 0 0 0.8em 0; \n      padding-bottom: 0.3em; \n      color: var(--md-blue-primary); \n      border-bottom: 1px solid var(--md-blue-light); \n      font-weight: 500; \n    }\n    \n    .log-item { \n      line-height: 1.6; \n    }\n    \n    .log-item-date { \n      font-weight: 500; \n      color: var(--md-text-primary); \n    }\n    \n    .log-item-content { \n      margin-left: 0.1em; \n      color: var(--md-text-secondary); \n    }\n\n    #tutorialPage {\n      display: none;\n      padding: 1.5em;\n      text-align: left;\n    }\n\n    .tutorial-title {\n      color: var(--md-blue-primary);\n      font-size: 1.3em;\n      margin-bottom: 1em;\n      font-weight: 500;\n    }\n\n    .tutorial-step {\n      margin-bottom: 1.2em;\n      line-height: 1.6;\n    }\n\n    .step-number {\n      display: inline-block;\n      width: 24px;\n      height: 24px;\n      background: var(--md-blue-primary);\n      color: white;\n      border-radius: 50%;\n      text-align: center;\n      line-height: 24px;\n      margin-right: 8px;\n      font-size: 0.9em;\n    }\n\n    .back-button {\n      background: var(--md-text-secondary);\n      margin-top: 1.5em;\n    }\n\n    .back-button:hover {\n      background: #616161;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n   \n    <div id=\"mainPage\">\n      <a href=\"legado://import/auto?src=${source.bookSourceUrl}/fqphp.json\" class=\"button\">æ›´æ–°ä¹¦æº</a>\n      <a href=\"https://t.me/Fqphp\" class=\"button\">åŠ å…¥ç”µæŠ¥</a>\n      <a href=\"javascript:showTutorial()\" class=\"button tutorial-button\">æŸ¥çœ‹æ•™ç¨‹</a>\n      \n      <div class=\"logs\">\n        <h2>æ›´æ–°è®°å½•</h2>\n        <div class=\"log-item\">\n          <div class=\"log-item-date\">2025-07-29</div>\n          <div class=\"log-item-content\">Â·ä¿®å¤ç™»å½•ç›¸å…³BUG</div><br>\n          <div class=\"log-item-date\">2025-07-26</div>\n          <div class=\"log-item-content\">Â·ä¿®å¤æ®µè¯„ç›¸å…³BUG</div>\n        </div>\n      </div>\n    </div>\n\n    <div id=\"tutorialPage\">\n     \n      <div class=\"tutorial-step\">\n        <span class=\"step-number\">1</span>\n        <span>ç‚¹å‡»\"æ®µè¯„å¼€å¯ å…³é—­\"æŒ‰é’®,å¯ä»¥æ‰“å¼€æ®µè¯„,å®‰å“é•¿æŒ‰æ°”æ³¡ç‚¹å‡»åˆ·æ–°,æºé˜…é•¿æŒ‰æ°”æ³¡å³å¯!</span>\n      </div>\n      \n      <div class=\"tutorial-step\">\n        <span class=\"step-number\">2</span>\n        <span>å…³äºå¯†é’¥ç›¸å…³ä½¿ç”¨giteeç™»å½•å³å¯è·å–å¯†é’¥,ç‚¹å‡»å°çœ¼ç›æŸ¥çœ‹å®Œæ•´å¯†é’¥å¡«å…¥ä¿å­˜å³å¯!</span>\n      </div>\n      \n      <div class=\"tutorial-step\">\n        <span class=\"step-number\">3</span>\n        <span>æ°”æ³¡æœ‰ä¸‰æ¬¾æ ·å¼,å¡«å…¥ 0 1 2 å³å¯æŸ¥çœ‹å¯¹åº”æ°”æ³¡æ ·å¼,å¦‚æœä½ æœ‰èƒ½åŠ›è‡ªè¡Œæ›´æ”¹SVG!</span>\n      </div>\n      \n      <div class=\"tutorial-step\">\n        <span class=\"step-number\">4</span>\n        <span>é¢œè‰²å³æ°”æ³¡é¢œè‰²,åå…­è¿›åˆ¶é¢œè‰²æ¯”å¦‚: #ffffff #000000 é‡åˆ°é—®é¢˜å¯åŠ å…¥ç”µæŠ¥ç¾¤èŠè·å–å¸®åŠ©!</span>\n      </div>\n      \n      <a href=\"javascript:showMain()\" class=\"button back-button\">è¿”å›é¡µé¢</a>\n    </div>\n  </div>\n\n  <script>\n    // æ˜¾ç¤ºæ•™ç¨‹é¡µé¢\n    function showTutorial() {\n      document.getElementById('mainPage').style.display = 'none';\n      document.getElementById('tutorialPage').style.display = 'block';\n    }\n\n    // æ˜¾ç¤ºä¸»é¡µé¢\n    function showMain() {\n      document.getElementById('tutorialPage').style.display = 'none';\n      document.getElementById('mainPage').style.display = 'block';\n    }\n  </script>\n</body>\n</html>\n`;\n  java.startBrowser(`data:text/html;base64,${java.base64Encode(html)}`, 'fqphp_ä¹¦æºæ›´æ–°');\n}",
    "respondTime": 5956,
    "ruleBookInfo": {},
    "ruleContent": {
      "content": "@js:\nlet url = java.hexDecodeToString(result);\n\nlet response = java.ajax( url + \"&key=\" + Map(\"å¯†é’¥\") + \"&ban=\" + W()\n);\n\nlet content = JSON.parse(response).data.content;\n\nif (java.get(\"dev\") == \"android\" && url.includes(\"%E7%9F%AD%E5%89%A7\") && book.durChapterIndex == chapter.index) {\n\tlet dj = `{{source.bookSourceUrl}}dpurl?url=${chapter.bookUrl}&ban=${W()}&key=${Map(\"å¯†é’¥\")}`;\n    java.startBrowser(dj,chapter.title);\n    content = \"åˆ·æ–°æ’­æ”¾\"; \n} else\nif (java.get(\"dp\") == \"å¼€å¯\" && /fq_id|qm_id/.test(book.bookUrl) && String(content).length > 0) {\n\t  type = book.bookUrl.match(/(.{2})_id=/)[1]\n\t  content = content.replace(/\\n+/g,\"\\n\")\n    bid = book.bookUrl.match(/(fq|qm)_id=(\\d+)/)[2];\n    cid = chapter.url.match(/(item_id|chapter_id)=(\\w+)/)[2];\n    version = chapter.url.match(/version=(\\w+)/)?.[1];\n    getComments(type, content, bid, cid, version);\n} else {\n    content;\n};",
      "imageStyle": "TEXT"
    },
    "ruleExplore": {
      "author": "author",
      "bookList": "$.data.books[*]",
      "bookUrl": "url",
      "coverUrl": "src",
      "intro": "intro",
      "kind": "mmfl",
      "name": "name"
    },
    "ruleSearch": {
      "author": "$.author",
      "bookList": "$.data.books",
      "bookUrl": "$.url",
      "checkKeyWord": "ç³»ç»Ÿ@ç•ªèŒ„",
      "coverUrl": "$.src",
      "intro": "$.intro",
      "kind": "$.mmfl",
      "name": "$.name"
    },
    "ruleToc": {
      "chapterList": "<js>\nfunction deviceType() {\n  try {\n    return !!java.androidId();\n  } catch (e) {\n    return false;\n  }\n}\nlet device = deviceType() ? 'android' : 'ios';\njava.put(\"dev\", device)\nlet url = baseUrl?.match(/&ts=([^&]*)/)?.[1] || null;\n\n// ç›´æ¥æ ¹æ® url å’Œè®¾å¤‡ç±»å‹åˆ¤æ–­æ¨¡å¼å¹¶èµ‹å€¼  \nif (device === 'android') {  \n  if (url === \"å¬ä¹¦\") {  \n    book.type = 32;  \n    java.longToast(\"å·²è‡ªåŠ¨åˆ‡æ¢ä¸ºå¬ä¹¦!\");  \n  } else if (url === \"æ¼«ç”»\") {  \n    book.type = 64;  \n    java.longToast(\"å·²è‡ªåŠ¨åˆ‡æ¢ä¸ºæ¼«ç”»!\");  \n  } else {  \n    book.type = 8;  // å®‰å“æ™®é€šé˜…è¯»æ¨¡å¼  \n  }  \n} else if (device === 'ios') {  \n  if (url === \"å¬ä¹¦\") {  \n    book.type = 1;  \n    java.longToast(\"å·²è‡ªåŠ¨åˆ‡æ¢ä¸ºå¬ä¹¦!\");  \n  } else if (url === \"æ¼«ç”»\") {  \n    book.type = 2;  \n    java.longToast(\"å·²è‡ªåŠ¨åˆ‡æ¢ä¸ºæ¼«ç”»!\");  \n  } else if (url === \"çŸ­å‰§\") {  \n    book.type = 3;  \n    java.longToast(\"å·²è‡ªåŠ¨åˆ‡æ¢ä¸ºè§†é¢‘!\");  \n  }else {  \n    book.type = 0;  // iOS æ™®é€šé˜…è¯»æ¨¡å¼  \n  }  \n}\n\nlet bid = baseUrl.match(/\\?(fq|qm)_id=([^&]*)/)?.[2]\nif (book.bookUrl.includes(\"fq_id\")){\n\tvar type = \"fqbzpl\"\n\tvar cname = \"item_id\"\n\t} else if (book.bookUrl.includes(\"qm_id\")) {\n\t\tvar type = \"qmbzpl\"\n\t\tvar cname = \"chapter_id\"\n\t\t}\n\n\n\n\nJSON.parse(result).data.lists.map((x) => {\n    let match = x.url.match(/item_id=([^&]+)|chapterId=\\d+-(\\d+)/);\nlet cid = match ? (match[1] || match[2]) : null;\n    x.url = `data:chapterUrl;base64,${java.base64Encode(\n        x.url\n    )},{\"type\":\"\",\"js\":\"book ? result :'${source.bookSourceUrl}${type}?book_id=${bid}&${cname}=${cid}&version=${x.version?? \"\"}&sessionid=${ck()}&key=${Map(\"å¯†é’¥\")}'\"}`;\n\n   return x;\n});\n</js>",
      "chapterName": "title",
      "chapterUrl": "url"
    },
    "searchUrl": "search?wd={{key}}&page={{page}}",
    "weight": 0
  },
  {
    "bookSourceComment": "æœç´¢æ¥å£@æƒ…æ— ç¾\nç†è®ºä¸Šæ˜¯å¯ä»¥ä¸‹è½½çš„ ä½†æ˜¯å»ºè®®è¿˜æ˜¯ä½å¹¶å‘ï¼ˆæ¥å£éšæ—¶ä¼šè¢«å…³é—­ ä½¿ç”¨çš„æœªè¢«éªŒè¯çš„tokenï¼‰\näº¤æµåé¦ˆç¾¤ï¼š640118388",
    "bookSourceGroup": "å¦å¸Œ",
    "bookSourceName": "å…­ä¹ä¹¦å§(ç›´è¿å¯ä¸‹è½½)",
    "bookSourceType": 0,
    "bookSourceUrl": "http://111.170.33.6:49988",
    "concurrentRate": "1000",
    "customOrder": 5,
    "enabled": true,
    "enabledCookieJar": false,
    "enabledExplore": false,
    "header": "@js:\nJSON.stringify({\n\t\"x-sec-token\": \"8f79170487338570cdbb178e4653ed25943a6af05f3c29043782de49fc7a8fbd2446589412f746e396a05744cf546027bc63d7391b0e86ff3551c4d8e52ac1f97a2492bcc15dba6a9e2181084ed6e3f2a4d8a7e5aa419a705c5cffc8a93f5827fce376e3c3df14b8498405ba5f2630c0fa948894f4f7e5e26840f431f50396e9\"\n\t})",
    "lastUpdateTime": 1752849813506,
    "respondTime": 180000,
    "ruleBookInfo": {
      "author": "author",
      "coverUrl": "cover",
      "intro": "<br> ğŸ•° æ›´æ–°æ—¶é—´ï¼š{{$.update}}\n ğŸ“– æœ€æ–°ç« èŠ‚ï¼š{{$.last}}\n ğŸ·ï¸ æ ‡ç­¾ï¼š{{$.tags}}ä¸¨{{$.else}}ç« \n ğŸ“œ ç®€ä»‹ï¼š{{$.info}}",
      "kind": "tags##\\|##,",
      "lastChapter": "{{$.last}} Â· {{$.update}}",
      "name": "bookname",
      "tocUrl": "http://111.170.33.6:49988/69shuba/chapters.php?bookId={{$.bookId}}",
      "wordCount": "{{$.else}}ç« "
    },
    "ruleContent": {
      "content": "content"
    },
    "ruleExplore": {},
    "ruleSearch": {
      "author": "author",
      "bookList": "data[*]",
      "bookUrl": "surl##.*\\/(\\d+).htm##http://111.170.33.6:49988/69shuba/detail.php?bookId=$1",
      "coverUrl": "cover",
      "intro": "description",
      "name": "title"
    },
    "ruleToc": {
      "chapterList": "-$.chapters[*]",
      "chapterName": "name",
      "chapterUrl": "{{baseUrl}}##.*=(\\d+)##http://111.170.33.6:49988/69shuba/content.php?bookId=$1&chapterId={{$.id}}"
    },
    "searchUrl": "http://111.170.33.6:49988/69shuba/search.php?key={{key}}&page={{page}}",
    "weight": 0
  },
  {
    "bookSourceComment": "æ”¯æŒçº¯bookidæœä¹¦,æ”¯æŒä¸‹æ¶,é»‘å±‹ç­‰å°è¯´æ­£æ–‡é˜…è¯»\né™„ï¼šæœ¬ä¹¦æºä»…æ”¯æŒå°è¯´ï¼Œä»…æ”¯æŒå°è¯´ï¼Œä»…æ”¯æŒå°è¯´ï¼ï¼ï¼\néƒ¨åˆ†å‘ç°éœ€è¦ç™»å½•æ‰èƒ½ä½¿ç”¨\näº¤æµåé¦ˆç¾¤ï¼š640118388\nä¿®å¤ä¸‹æ¶ä¹¦ç±æ— ä¹¦åçš„æƒ…å†µ",
    "bookSourceGroup": "å¦å¸Œ",
    "bookSourceName": "ç•ªèŒ„å°è¯´ï¼ˆä¸é™åˆ¶ä¸‹è½½ï¼‰",
    "bookSourceType": 0,
    "bookSourceUrl": "http://111.170.33.6:49988/",
    "customOrder": 8,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "@js: \nä¸ªäººä¸­å¿ƒ = 1 \n \njs = (cid, genre, gender) => `@js:\nsource.key + \"/reading/bookapi/new_category/landing/v/?\" + [\n    \"category_id=${cid}\",\n    \"limit=50\",\n    \"offset=\" + (page - 1),\n    \"gender=${gender}\",\n    \"genre=${genre}\"\n  ].join(\"&\")`\n\nreadHistory = (path) => `@js:\nlet ck = \"sessionid=\" + (String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : source.getLoginInfoMap()['æ‰‹åŠ¨ç™»å½•Token'])\n\"{{source.key}}/multi-detail?book_id=\" + getBookId(java.ajax('https://reading.snssdk.com/reading/bookapi/read_history/list/v/?aid=1967&version_code=99999,{\"headers\":{\"Cookie\":\"install_id=2531502907244067;' + ck + '\"}}'), page-1)`\n\t\n\t\nobj = (title, url, type, type1) => ({\n  title: title,\n  url: url,\n  style: {\n    layout_flexGrow: 1,\n    layout_flexBasisPercent: type\n  }\n})\n\narr = []\njava.longToast(\"è¯·ç¨ç­‰ï¼Œå‘ç°åˆ—è¡¨æ­£åœ¨çƒ­æ›´æ–°ï¼\")\nindex=[0, 1, 2]\nfor (let i of index) {\n  // java.toast(i)\n  let type = i\n  $ = JSON.parse(java.ajax(source.key + \"/reading/bookapi/new_category/front/v/?\" + [\n      \"update_version_code=99999\",\n      \"distinct_style=1\",\n      \"new_category_tab=\" + i\n    ].join(\"&\")\n  )).data.category_tab_data\n  cate = []\n  cate.push(obj(\n    \"====== \" + $.tab_name + \" ======\", \"\", 1\n  ))\n  $.cell_data.forEach((c) => {\n    gender_1 = (type == 0 || type == 1) ? type : 1;\n    genre_1 = type == 3 ? 1 : type == 5 ? 110 : type == 6 ? 130 : 0;\n    cate.push(obj(\n      c.cell_name,\n      js(c.atom_data[0].category_data.category_id, genre_1, gender_1),\n      1\n    ))\n    for (j = 2; j < 5; j++) {\n      c.atom_data.slice(1).forEach((a) => {\n        d = a.category_data\n        if (d.name.length == j) {\n          cate.push(obj(d.name, js(d.category_id, genre_1, gender_1), -1))\n        }\n      })\n    }\n  })\n  arr = cate.concat(arr)\n}\n\nlet book_shelf_url = 'https://fanqienovel.com/reading/bookapi/bookshelf/info/v:version/?aid=1967&iid=0&version_code=99999&update_version_code=57700'\nlet book_shelf_info = JSON.parse(java.ajax(book_shelf_url + ', ' + JSON.stringify({\n  headers: {\n    'Cookie': \"sessionid=\" + (String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : (source.getLoginInfoMap() ? source.getLoginInfoMap() : {})['æ‰‹åŠ¨ç™»å½•Token']),\n  }\n})))\n \njava.log(JSON.stringify(book_shelf_info))\n\nlet username\nif (book_shelf_info.code != 0) {\n  ä¸ªäººä¸­å¿ƒ = 0\n  // source.setVariable('{}')\n} else {\n  let uinfo = java.ajax(\"https://fanqienovel.com/api/user/info/v2,\" + JSON.stringify({ headers: { Cookie: \"sessionid=\" + (String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : (source.getLoginInfoMap() ? source.getLoginInfoMap() : {})['æ‰‹åŠ¨ç™»å½•Token']) }}))\n  let arrB = []\n  for (let i of book_shelf_info.data.book_shelf_info) {\n    arrB.push(i.book_id)\n  }\n  uinfo = JSON.parse(uinfo)\n  write_config('bookshelf.' + uinfo.data.id, arrB)\n  write_config('userinfo', { name: uinfo.data.name, userid: uinfo.data.id })\n  username = uinfo.data.name\n}\n\nlet gro = []\npush = (title, url, type) => gro.push({\n  title: title,\n  url: url,\n  style: {\n    layout_flexGrow: 1,\n    layout_flexBasisPercent: type\n  }\n});\n\nlet sArr = []\n\nif (ä¸ªäººä¸­å¿ƒ) {\n  let groups_bookids = {\n    \"ç»„å¤–\": []\n  }\n  book_shelf_info.data.book_shelf_info.forEach(i => {\n    if (!groups_bookids[i.group_name ? i.group_name : \"ç»„å¤–\"]) groups_bookids[i.group_name] = []\n    groups_bookids[i.group_name ? i.group_name : \"ç»„å¤–\"].push(i.book_id)\n  })\n\n  Object.keys(groups_bookids).forEach(k => {\n    var multi_detail_post_body = {\n      data: {\n        book_shelf_info: []\n      }\n    }\n    groups_bookids[k].forEach(i => multi_detail_post_body.data.book_shelf_info.push({ book_id: String(i), item_id: '0' }))\n    // var multi_detail_group_url = `https://fanqienovel.com/api/bookshelf/multidetail,${JSON.stringify(multi_detail_post_body)}`\n    // var book_ids = getBookId(JSON.stringify(multi_detail_post_body)).join(\",\")\n    push(k, \"https://fanqienovel.com/fqbookshelf/groupName/\" + k, 0.4)\n  })\n  if (Object.keys(groups_bookids).length % 2 != 0) push(\"å ä½\", \"\", 0.4)\n  // java.log(JSON.stringify(gro, null, 2))\n  sArr.push(obj(username, '', 1))\n  sArr.push(obj(\"ğŸ…ä¹¦æ¶ğŸ…\", \"https://fanqienovel.com/fqbookshelf\", 1))\n  sArr = sArr.concat(gro)\n  // java.toast(JSON.stringify(sArr)) \n  sArr.push(obj(\"ğŸ“”é˜…è¯»å†å²ğŸ“”\", readHistory(), 1))\n  // sArr.push(obj('é¦–é¡µæ¨è', \"https://fanqienovel.com/tab/0\", 0.4))\n   sArr.push(obj('ğŸ“šä¸ªæ€§æ¨èğŸ“š', \"https://api5-normal-lf.fqnovel.com/reading/bookapi/bookmall/cell/change/v1/?aid=1967&change_type=1&iid=1&app_name=novelapp&version_code=99999&cell_id=7012498777642631182&algo_type=101&category_id=0\", 0.4))\n   sArr.push(obj('ğŸ”å·…å³°æ¦œå•ğŸ”', \"https://fanqienovel.com/api/author/misc/top_book_list/v1/?limit=50&offset=0&version_code=99999\", 0.4))\n   sArr.push(obj('ğŸ‘¥ç”·é¢‘çƒ­æœğŸ‘¥', \"https://novel.snssdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&app_name=news_article&app_version=9.7.3&channel=tengxun_tt&device_platform=android&os=android&device_type=ProjectTitan&os_api=29&os_version=10&openlive_plugin_status=1&isTTWebViewHeifSupport=0&limit=20&offset={{(page-1)*100}}&side_type=12&type=1\", 0.4))\n   sArr.push(obj('ğŸ‘ç”·é¢‘æ¨èğŸ‘', \"https://novel.snssdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&app_name=news_article&app_version=9.7.3&channel=tengxun_tt&device_platform=android&os=android&device_type=ProjectTitan&os_api=29&os_version=10&openlive_plugin_status=1&isTTWebViewHeifSupport=0&limit=20&offset={{(page-1)*100}}&side_type=10&type=1\", 0.4))\n  \n  \n  \n}\n\narr = sArr.concat(arr)\nJSON.stringify(arr)\n",
    "header": "@js:\nJSON.stringify({\n\t\"x-sec-token\": \"8f79170487338570cdbb178e4653ed25943a6af05f3c29043782de49fc7a8fbd2446589412f746e396a05744cf546027bc63d7391b0e86ff3551c4d8e52ac1f97a2492bcc15dba6a9e2181084ed6e3f2a4d8a7e5aa419a705c5cffc8a93f5827fce376e3c3df14b8498405ba5f2630c0fa948894f4f7e5e26840f431f50396e9\"\n\t})",
    "jsLib": "function splitArray(input, size) {\n  const output = []\n  for (let i = 0; i < input.length; i += size) {\n    output.push(input.slice(i, i + size))\n  }\n  return output\n}\nfunction write_config(key, value) {\n  if (Packages.android.text.TextUtils.isEmpty(this.source.getVariable())) {\n    this.source.setVariable('{}')\n  }\n  // this.java.log('var:' + this.source.getVariable())\n  let obj = JSON.parse(this.source.getVariable())\n  let arr = key.split('.')\n  let temp = obj\n\n  for (let i = 0; i < arr.length - 1; i++) {\n    let currentKey = arr[i]\n    if (!temp[currentKey]) {\n      temp[currentKey] = {}\n    }\n    temp = temp[currentKey]\n  }\n  temp[arr[arr.length - 1]] = value\n  this.source.setVariable(JSON.stringify(obj))\n}\nfunction read_config(key) {\n  if (Packages.android.text.TextUtils.isEmpty(this.source.getVariable())) {\n    this.source.setVariable('{}')\n  }\n  // this.java.log('var:' + this.source.getVariable())\n  let obj = JSON.parse(this.source.getVariable())\n  let arr = key.split('.')\n  let res = JSON.parse(JSON.stringify(obj))\n  for (let i = 0; i < arr.length; i++) {\n    res = res[arr[i]] || (i < (arr.length - 1) ? {} : undefined)\n    // this.java.log(JSON.stringify(res))\n  }\n  return res\n}\nfunction getBookId(url, page) {\n  const {java} = this\n  let $ = JSON.parse(url).data\n  let list\n  let arr\n  if ($.book_shelf_info != 0 && $.book_shelf_info != undefined) {\n   arr = $.book_shelf_info.map($ => $.book_id)\n  } else if (let (list = $.data_list) list != 0 && $.data_list != undefined)  {\n    arr = $.data_list.map($ => $.book_id_str)\n  } else {\n    java.toast(\"è·å– book_id å¤±è´¥ï¼Œä½ å¯èƒ½éœ€è¦ç™»å½•ï¼\")\n  }\n  return arr.slice(page*100, (page+1)*100)\n}",
    "lastUpdateTime": 1753960329846,
    "loginUi": "[\n{\n        \"name\":  \"ğŸ…ç•ªèŒ„è´¦å·ç™»å½•ğŸ…\",\n        \"type\": \"button\",\n        \"action\": \"Y(true)\",\n        \"style\": {\n      \"layout_flexGrow\": 1,\n      \"layout_flexBasisPercent\": 0.4\n    }\n  },{\n        \"name\":  \"ğŸ…é€€å‡ºç™»å½•ğŸ…\",\n        \"type\": \"button\",\n        \"action\": \"X()\",\n        \"style\": {\n      \"layout_flexGrow\": 1,\n      \"layout_flexBasisPercent\": 0.4\n    }\n  }\n]",
    "loginUrl": "function login(){}\nfunction login_(openBrowser, checkMode) {\n    // java.removeCookie(\"snssdk.com\")\n    var cookie_ = String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : (source.getLoginInfoMap() ? source.getLoginInfoMap() : {})['æ‰‹åŠ¨ç™»å½•Token']\n    // java.toast(cookie_)\n    if (cookie_ && cookie_ != \"\" && !checkMode) {\n        if (!source.variableComment) {\n            java.toast(\"è¯·ä¸è¦é‡å¤ç™»å½•ï¼Œè¯·å…ˆé€€å‡ºç™»å½•ï¼\")\n        } else {\n            java.toast(\"æ‚¨ä¸ºå¡«å†™tokenç™»å½•ï¼Œè¯·æ‰‹åŠ¨ç§»é™¤tokenåå†æ¬¡ç™»å½•\")\n        }\n        return false\n    }\n    if (openBrowser) {\n        try {\n            java.startBrowserAwait(\"https://fanqienovel.com/\", \"ç™»å½•\")\n        } catch (e) {\n            java.toast(e)\n        }\n    }\n    // java.log(\"snssdk cookie: \" + java.getCookie(\"snssdk.com\") + \"will be reomved\")\n    try {\n        cookie.removeCookie(\"snssdk.com\")\n    } catch (e) {}\n    // java.log(cookie)\n    var cookie_ = \"sessionid=\" + String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : (source.getLoginInfoMap())['æ‰‹åŠ¨ç™»å½•Token']\n    let user\n    try {\n      user = JSON.parse(java.ajax(\"https://fanqienovel.com/api/user/info/v2,\" + JSON.stringify({\n        method: \"GET\",\n        headers: {\n          \"Cookie\": cookie_\n        }\n      }))).data.name\n     } catch (e) {java.log(e)}\n    if (!cookie_ || cookie_ == \"sessionid=\" || !user) {\n        java.toast(\"æœªè·å–åˆ°ç™»å½•å‡­æ®ï¼Œç™»å½•å¤±è´¥\")\n        return false\n    }\n    java.toast(\"æ¬¢è¿ \" + user + \"\\nç™»å½•æˆåŠŸï¼\")\n    return true\n}\nfunction Y(a, b) {\n  try {\n    login_(a, b)\n  } catch (e) {\n    java.log(e+\"\\n\"+e.stack)\n  }\n}\nfunction X() {\n    cookie.removeCookie(\"fanqienovel.com\");\n    cookie.removeCookie(\"snssdk.com\");\n    if (String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : (source.getLoginInfoMap() ? source.getLoginInfoMap() : {})['æ‰‹åŠ¨ç™»å½•Token']) java.toast(\"è¯·æ‰‹åŠ¨ç§»é™¤å¡«å†™çš„Token\")\n    else java.toast(\"é€€å‡ºç™»å½•æˆåŠŸ\");\n}",
    "respondTime": 15688,
    "ruleBookInfo": {
      "author": "author",
      "coverUrl": "<js>\nlet replaceCover = (u) => {\n    if (u.startsWith(\"https://\")) u = u.substring(8)\n    else u = u.substring(7)\n    let uArr = u.split(\"/\")\n    uArr[0] = \"https://p6-novel.byteimg.com/origin\"\n    let uArr2 = []\n    uArr.forEach((x) => {\n        if (!x.includes(\"?\") && !x.includes(\"~\")) uArr2.push(x)\n        else uArr2.push(x.split(\"~\")[0])\n    })\n    u = uArr2.join(\"/\")\n    return u\n}\nreplaceCover(java.getString(\"thumb_url\"))\n</js>",
      "init": "data",
      "intro": "&nbsp;&nbsp;\nğŸ“– æºåï¼š{{$.original_book_name}}\nğŸ“– åˆ«åï¼š{{$.book_flight_alias_name}}\nâœï¸ å¼€å‘ï¼š{{$.create_time##T|\\+.*## }}\nğŸ·ï¸ æ ‡ç­¾ï¼š{{$.tags}}\nğŸ‘¤ ä¸»è§’ï¼š{{$.roles##\\[|\\\"|\\]}}\nğŸ‘ï¸ åœ¨çº¿ï¼š{{$.read_count}}äººåœ¨è¯»{{\"\\n\"+\"â€‹\"}}\nğŸ“œ ç®€ä»‹ï¼š{{$.abstract}}{{\"\\n\"+\"â€‹\"}}\nğŸ“ {{$.copyright_info##ï¼Œ.*##ã€‚}}\n@js:result.replace(/.+ï¼š(äººåœ¨è¯»)?\\n/g,\"\")",
      "kind": "{{java.getString(\"gender\")==1?\"ç”·ç”Ÿ\":\"å¥³ç”Ÿ\"}}\n{{$.category}}\nè¿è½½{{$.creation_status}}å®Œç»“\n{{$.score}}åˆ†\n{{java.timeFormat(java.getString(\"last_chapter_update_time\")*1000)}}\n{{$.sub_info}}\n@js:result.replace(\"è¿è½½0\",\"\").replace(\"1å®Œç»“\",\"\").replace(\"è¿è½½4å®Œç»“\",\"æ–­æ›´\")",
      "lastChapter": "{{$.last_chapter_title}} â€¢ {{java.timeFormat(java.getString(\"last_chapter_update_time\")*1000)}}",
      "name": "book_name",
      "tocUrl": "/chapter?bookid={{$.book_id}}",
      "wordCount": "word_number"
    },
    "ruleContent": {
      "content": "$.content##å¦å¸Œ"
    },
    "ruleExplore": {
      "author": "$.author",
      "bookList": "<js>\nfunction getBookIdFull(url) {\n\tconst {java} = this\n\t$ = JSON.parse(url).data\n\tif ($.book_shelf_info != 0 && $.book_shelf_info != undefined) {\n\t\tarr = $.book_shelf_info.map($ => $.book_id)\n\t} else if (list = $.data_list != 0 && $.data_list != undefined)  {\n\t\tarr = $.data_list.map($ => $.book_id_str)\n\t} else {\n\t\tjava.toast(\"è·å– book_id å¤±è´¥ï¼Œä½ å¯èƒ½éœ€è¦ç™»å½•ï¼\")\n\t}\n\treturn arr\n}\nlet ck = \"sessionid=\" + (String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : (source.getLoginInfoMap() ? source.getLoginInfoMap() : {})['æ‰‹åŠ¨ç™»å½•Token'])\n\ngetShelf = () => {\nlet book_shelf_url = 'https://fanqienovel.com/reading/bookapi/bookshelf/info/v:version/?aid=1967&iid=0&version_code=57700&update_version_code=57700'\nlet book_shelf_info = java.ajax(book_shelf_url + ', ' + JSON.stringify({\n  headers: {\n    'Cookie': ck\n  }\n}))\n\nlet arrB = []\nfor (let i of JSON.parse(book_shelf_info).data.book_shelf_info) {\n  arrB.push(i.book_id)\n}\nwrite_config('bookshelf.' + read_config('userinfo.userid'), arrB)\n\nbid = getBookIdFull(book_shelf_info)\nlet id_list = splitArray(bid, 100)\nlet urls = []\nid_list.forEach(i => {\n    urls.push(source.key + \"/multi-detail?bookid=\" + i.join(\",\"))\n})\n\nres = java.ajaxAll(urls)\nlet resp = {book_info: []}\nres.forEach(r => {\n  resp.book_info = resp.book_info.concat(JSON.parse(r.body()).data)\n})\n\nreturn resp\n}\n\nfunction getByGroupName(name) {\n  let book_shelf_url = 'https://fanqienovel.com/reading/bookapi/bookshelf/info/v:version/?aid=1967&iid=0&version_code=57700&update_version_code=57700'\n\n  let book_shelf_info = JSON.parse(java.ajax(book_shelf_url + ', ' + JSON.stringify({\n    headers: {\n      'Cookie': ck,\n    }\n  })))\n  let group_bookids = {\n    \"ç»„å¤–\": []\n  }\n  book_shelf_info.data.book_shelf_info.forEach(i => {\n    if (!group_bookids[i.group_name ? i.group_name : \"ç»„å¤–\"]) group_bookids[i.group_name] = []\n    group_bookids[i.group_name ? i.group_name : \"ç»„å¤–\"].push(i.book_id)\n  })\n  // java.log(JSON.stringify(group_bookids[\"ç»„å¤–\"]))\n  // java.log(decodeURIComponent(name))\n  if (!group_bookids[decodeURIComponent(name)]) return {data: []}\n  //java.log(\"awa\")\n  let book_ids = splitArray(group_bookids[decodeURIComponent(name)], 100)\n  let urls = []\n\n  book_ids.forEach(i => {\n    urls.push(source.key + \"/multi-detail?bookid=\" + i.join(\",\"))\n  })\n  \n  res = java.ajaxAll(urls)\n\n  let resp = {book_info: []}\n  res.forEach(r => {\n    resp.book_info = resp.book_info.concat(JSON.parse(r.body()).data)\n  })\n\n  return resp\n}\n\nfunction getByTabIndex(index) {\n  let url = _mlsec.requestHeader(\n\t  \"bookmall/tab\",\n    \"version_name=5.8.9.32\",\n\t  null,\n\t  ck\n  )\n  let all = JSON.parse(java.ajax(url))\n  let tab = all.data.tab_item[0].cell_data[index].cell_data\n  if (!tab) tab = []\n  let bookList = []\n  for (let i of tab) {\n    bookList = bookList.concat(i.book_data)\n    // java.log(JSON.stringify(i.book_data))\n  }\n  return { book_info: bookList }\n}\n\nif (baseUrl.endsWith(\"bookshelf\")) result = getShelf(\"bookshelf/info\")\nelse {\n  let w = baseUrl.split(\"/\")\n  if (baseUrl.includes(\"groupName\")) {\n    result = getByGroupName(w[w.length - 1])\n  } else if (baseUrl.includes(\"tab\")) {\n    result = getByTabIndex(parseInt(w[w.length - 1]))\n  } else result = JSON.parse(result)\n}\nJSON.stringify({data: result.book_list || result.book_info || result.data.result || result.data.book_info || result.detail_list || result.data })\n</js>\n$..book_data[*]||$.data[*]",
      "bookUrl": "{{source.key}}detail?bookid={{$.book_id||$.bookId}}",
      "coverUrl": "<js>\nlet replaceCover = (u) => {\n    if (u.startsWith(\"https://\")) u = u.substring(8)\n    else u = u.substring(7)\n    let uArr = u.split(\"/\")\n    uArr[0] = \"https://p6-novel.byteimg.com/origin\"\n    let uArr2 = []\n    uArr.forEach((x) => {\n        if (!x.includes(\"?\") && !x.includes(\"~\")) uArr2.push(x)\n        else uArr2.push(x.split(\"~\")[0])\n    })\n    u = uArr2.join(\"/\")\n    return u\n}\nreplaceCover(java.getString(\"thumb_url\"))\n</js>",
      "intro": "$.abstract##\\n",
      "kind": "ç”·ç”Ÿ{{$.gender}}å¥³ç”Ÿ\nè¿è½½{{$.creation_status}}å®Œç»“\n{{$.score}}åˆ†\n{{$.sub_info||$.category}}\n##è¿è½½0|1å®Œç»“|ç”·ç”Ÿ0|1å¥³ç”Ÿ|ç”·ç”Ÿå¥³ç”Ÿ[\\s\\S]*\n@js:result\n.replace(\"ç”·ç”Ÿ2å¥³ç”Ÿ\",\"å‡ºç‰ˆ\")\n.replace(\"è¿è½½4å®Œç»“\",\"æ–­æ›´\")\n.replace(\"è¿è½½-1å®Œç»“\",\"æœªçŸ¥\");",
      "lastChapter": "{{$.last_chapter_title}} â€¢ {{java.timeFormat(java.getString(\"last_chapter_update_time\")*1000)}}",
      "name": "$.book_name",
      "wordCount": "$.word_number"
    },
    "ruleSearch": {
      "author": "author##</?em>",
      "bookList": "$.data.book_data.*||$..book_info[*]||$.[*]",
      "bookUrl": "@js:\nif (baseUrl.match(/detail/)){\n\tresult=baseUrl;\n\t}else {\n\t\tresult=source.key+'detail?bookid={{$.book_id}}'\n\t\t}result",
      "checkKeyWord": "7268620849496722495",
      "coverUrl": "thumb_url",
      "intro": "abstract",
      "kind": "category&&score&&category_tags.[*].category_name",
      "lastChapter": "è¿è½½{{$.creation_status}}å®Œç»“##è¿è½½0|1å®Œç»“",
      "name": "book_name||title##<em>|</em>|ã€Š|ã€‹"
    },
    "ruleToc": {
      "chapterList": "data.chapterListWithVolume[*].[*]",
      "chapterName": "title",
      "chapterUrl": "/content?item_id={{$.itemId}}",
      "updateTime": "{{$.volume_name}} | {{java.timeFormatUTC(java.getString(\"firstPassTime\") * 1000, 'yyyy-MM-dd HH:mm:ss',28800000)}}\n@js:\nif (result.startsWith(\" |\")) result = result.slice(2)\nif (result.startsWith(\"| \")) result = result.slice(2)\nresult"
    },
    "searchUrl": "@js:\nif (key.match(/\\d{19}/)){\n\tresult=source.key+'detail?bookid='+key\n\t}else {\n\t\tresult=source.key+'search?key='+key+'&page='+page\n\t\t}result",
    "weight": 0
  }
]